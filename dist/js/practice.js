$(function(){function e(){$.ajax({type:"post",url:http+"domainStock/getByRandom",dataType:"json",async:!1,contentType:"application/json;charset=utf-8",data:JSON.stringify({}),success:function(t){if(console.log(t),0==t.status)alert("服务器连接超时"),e();else{I=t.list,S=I.length;var o=t.name,n=t.startTime,a=t.endTime;console.log(o),sessionStorage.setItem("gu",o),sessionStorage.setItem("startTime",n),sessionStorage.setItem("endTime",a);for(var s=0;s<I.length;s++)p.push(I[s].updateTime)}},error:function(e){console.log(e)}})}function t(){if(v<S){var e=[],t=I[v].updateTime,n=I[v].open,l=I[v].close,c=(I[v].riseAndFallValue,I[v].riseAndFall),m=I[v].low,g=I[v].high,p=I[v].vol,h=I[v].turnover;if(e.push(t),e.push(n),e.push(l),e.push(c),e.push(m),e.push(g),e.push(p),e.push(h),k.push(e),i=e[1],w=parseFloat(e[6]),r=e[2],i<r){f={normal:{color:"#ef232a"}};(u={}).value=w,u.itemStyle=f,T.push(u)}else{var u={},f={normal:{color:"#14b143"}};u.value=w,u.itemStyle=f,T.push(u)}o(),5==d?a():7==d&&s(),x>0?$(".percent").css("color","#ef232a"):x<0?$(".percent").css("color","#14b143"):$(".percent").css("color","#fff"),$(".percent").html(x+"%"),v++}if(v>=59){$(".mask").show(),$(".popup").show(),$(".start_box").hide(),$(".content").show(),x>0?$(".count").css("color","#ef232a"):x<0?$(".count").css("color","#14b143"):$(".count").css("color","#fff"),$(".count").html($(".percent").html());var y=sessionStorage.getItem("name"),b=sessionStorage.getItem("headImg");$(".name").html(y),$(".head_img").find("img").attr("src",b);var t=sessionStorage.getItem("time"),F=sessionStorage.getItem("startTime"),_=sessionStorage.getItem("endTime"),M=sessionStorage.getItem("gu");$(".shares").html(M+"<br/>"+F+"　至　"+_),console.log("定时器"+t),clearInterval(t)}}function o(){function e(e,t){for(var o=[],n=0,a=t.length;n<a;n++)if(n<e)o.push("-");else{for(var s=0,i=0;i<e;i++)s+=t[n-i][1];o.push(s/e)}return o}k.map(function(e){return e[0]});var t=k.map(function(e){return[+e[1],+e[2],+e[4],+e[5]]});k.map(function(e){return e[6]}),e(5,t),e(10,t),e(20,t);b.setOption({series:[{type:"candlestick",name:"",data:t,markPoint:{data:F}},{name:"Volumn",type:"bar",data:T},{name:"MA5",type:"line",data:e(5,t)},{name:"MA10",type:"line",data:e(10,t)},{name:"MA20",type:"line",data:e(20,t)}]})}function n(){function e(e,t){for(var o=[],n=0,a=t.length;n<a;n++)if(n<e)o.push("-");else{for(var s=0,i=0;i<e;i++)s+=t[n-i][1];o.push(s/e)}return o}var t=["2016-03-29","2016-03-30","2016-03-31","2016-04-01","2016-04-04","2016-04-05","2016-04-06","2016-04-07","2016-04-08","2016-04-11","2016-04-12","2016-04-13","2016-04-14","2016-04-15","2016-04-18","2016-04-19","2016-04-20","2016-04-21","2016-04-22","2016-04-25","2016-04-26","2016-04-27","2016-04-28","2016-04-29","2016-05-02","2016-05-03","2016-05-04","2016-05-05","2016-05-06","2016-05-09","2016-05-10","2016-05-11","2016-05-12","2016-05-13","2016-05-16","2016-05-17","2016-05-18","2016-05-19","2016-05-20","2016-05-23","2016-05-24","2016-05-25","2016-05-26","2016-05-27","2016-05-31","2016-06-01","2016-06-02","2016-06-03","2016-06-06","2016-06-07","2016-06-08","2016-06-09","2016-06-10","2016-06-13","2016-06-14","2016-06-15","2016-06-16","2016-06-17","2016-06-20","2016-06-21"],o=[[]],n=[],a=[],s=e(5,o),l=e(10,o),c=e(20,o);e(5,n),e(10,n);option={animation:!1,backgroundColor:"#000",color:m,axisPointer:{link:[{xAxisIndex:[0,1]}]},dataZoom:[{type:"slider",xAxisIndex:[0,1],realtime:!1,start:0,end:1e9,top:0,height:0,handleIcon:"M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"120%"}],xAxis:[{type:"category",data:t,boundaryGap:!1,show:!1,axisLine:{lineStyle:{color:"#777"}},axisLabel:{show:!1},min:"dataMin",max:"dataMax",axisPointer:{show:!0},axisTick:{inside:!0}},{type:"category",gridIndex:1,data:t,scale:!0,boundaryGap:!1,show:!1,splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{color:"#777"}},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitNumber:2,axisLine:{lineStyle:{color:"#777"}},splitLine:{show:!0},axisTick:{show:!1},axisLabel:{inside:!0,formatter:"{value}\n"}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],grid:[{left:20,right:20,top:0,height:f},{left:20,right:20,height:y,top:f}],graphic:[{type:"group",left:"center",bounding:"raw",children:[{id:"MA5",type:"text",style:{fill:m[1],font:g},left:0},{id:"MA10",type:"text",style:{fill:m[2],font:g},left:"center"},{id:"MA20",type:"text",style:{fill:m[3],font:g},right:0},{id:"vol5",type:"text",style:{fill:m[1],font:g}},{id:"vol10",type:"text",style:{fill:m[2],font:g}}]}],series:[{name:"Volumn",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{normal:{color:function(e){return i<r?"#ef232a":"#14b143"}}},data:a},{type:"candlestick",name:"日K",data:o,itemStyle:{normal:{color:"#ef232a",color0:"#14b143",borderColor:"#ef232a",borderColor0:"#14b143"},emphasis:{color:"black",color0:"#444",borderColor:"black",borderColor0:"#444"}},markPoint:{symbolSize:20,label:{normal:{show:!1}},data:[],tooltip:{formatter:function(e){return e.name+"<br>"+(e.data.coord||"")}}}},{name:"MA5",type:"line",data:s,smooth:!0,showSymbol:!1,lineStyle:{normal:{width:1}}},{name:"MA10",type:"line",data:l,smooth:!0,showSymbol:!1,lineStyle:{normal:{width:1}}},{name:"MA20",type:"line",data:c,smooth:!0,showSymbol:!1,lineStyle:{normal:{width:1}}}]},(b=echarts.init(document.getElementById("main3"))).setOption(option)}function a(){x=parseFloat($(".percent").html()),x=parseFloat(x.toFixed(2)),console.log(x);var e=parseFloat(I[v+1].riseAndFall);console.log(e),x+=parseFloat(e.toFixed(2)),x=x.toFixed(2)}function s(){x=parseFloat($(".percent").html()),x=parseFloat(x.toFixed(2)),console.log(x);var e=parseFloat(I[v+1].riseAndFall);console.log(e),x-=parseFloat(e.toFixed(2)),x=x.toFixed(2)}var i,r,l,c=1,m=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],g="bold 12px Sans-serif",p=[],d=6,h=1e3,u=parseFloat($(".center").height()),f=.6*u,y=.2*u;console.log(u,f,y),$(document).ready(function(){$(".mask").show(),$(".popup").show()}),$(".leftSpeed").on("touchend",function(){h<=500?h=500:h-=500,$(".kxian").html(h/1e3+"秒一个k线"),clearInterval(l),l=setInterval(function(){t(),console.log(h)},h),sessionStorage.setItem("time",l)}),$(".rightSpeed").on("touchend",function(){h>=2500?h=2500:(h+=500,$(".kxian").html(h/1e3+"秒一个k线"),clearInterval(l),l=setInterval(function(){t(),console.log(h)},h),sessionStorage.setItem("time",l))});var x=parseInt($(".percent").html()).toFixed(2);$(".start").on("touchstart",function(){var e=document.getElementById("start");setTimeout(function(){e.play()},h),$(".popup").hide(),$(".mask").hide(),$(".three").show(),$(".go").attr("src","../image/go.png"),c=0,setTimeout(function(){$(".three").hide(),$(".two").show()},1e3),setTimeout(function(){$(".two").hide(),$(".one").show()},2e3),setTimeout(function(){$(".one").hide(),$(".come").show()},3e3),setTimeout(function(){$(".come").hide(),l=setInterval(function(){t(),console.log(h)},h),sessionStorage.setItem("time",l)},4e3)}),$(".headRight").on("click",function(){location.href="../index.html"}),$(".go").on("click",function(){1==c?($(this).attr("src","../image/go.png"),c=0):($(this).attr("src","../image/stop.png"),c=1)}),function(){$.ajax({type:"post",url:http+"gUserInfo/getUserInfoById",dataType:"json",ansyc:!1,contentType:"application/json;charset=utf-8",data:JSON.stringify({userNumber:userNumber}),success:function(e){console.log(e);var t=e.gUserInfo,o=t.headImg,n=t.name;sessionStorage.setItem("headImg",o),sessionStorage.setItem("name",n),$(".headImg").find("img").attr("src",t.headImg),$(".nickName").html(t.name),"菜鸟"==t.dan?$(".winImg").attr("src","../image/shield.png"):"小白"==t.dan?$(".winImg").attr("src","../image/ic_kline_flag_level_2.png"):"精英"==t.dan?$(".winImg").attr("src","../image/ic_kline_flag_level_3.png"):"大师"==t.dan?$(".winImg").attr("src","../image/ic_kline_flag_level_4.png"):"大将"==t.dan?$(".winImg").attr("src","../image/ic_kline_flag_level_5.png"):"王者"==t.dan&&$(".winImg").attr("src","../image/ic_kline_flag_level_6.png")}})}();var I,b,w,k=[],v=0,S=0,F=[],T=[];$(function(){e(),n()});$(".more").on("click",function(){var e=document.getElementById("moreMusic"),t=document.getElementById("pingMusic"),o=parseInt($(this).attr("type")),n=(parseInt($(".kong").attr("sign")),new Object),s=k[k.length-1],i=[];i[0]=s[0],i[1]=parseFloat(s[5]);for(var r=0;r<F.length;r++)F[r].coord==i?n.symbol="image://../image/s.png":n.symbol="image://../image/b.png";n.name="xx",n.coord=i,n.symbolOffset=[0,"200%"],F.push(n),0==o?(e.play(),d=5,$(".word").html("做多"),$(".word").css("background","#f00"),$(".kong").attr("src","../image/pin.png"),$(this).attr("type",1),$(this).hide(),$(".kong").attr("sign",3),a()):2==o&&(d=6,t.play(),$(".word").html("平仓"),$(".word").css("background","#989898"),$(".kong").show(),$(this).attr("src","../image/more.png"),$(this).attr("type",0),$(".kong").attr("sign",1))}),$(".kong").on("click",function(){var e=document.getElementById("kongMusic"),t=document.getElementById("pingMusic"),o=(parseInt($(this).attr("type")),parseInt($(".kong").attr("sign"))),n=new Object,a=k[k.length-1];console.log(I[v].updateTime),console.log(I[v+1].updateTime);var i=[];i[0]=a[0],i[1]=parseFloat(a[5]),console.log(i);for(var r=0;r<F.length;r++)F[r].coord==i?n.symbol="image://../image/b.png":n.symbol="image://../image/s.png";n.name="xx",n.symbolOffset=[0,"-80%"],n.coord=i,F.push(n),3==o?(t.play(),$(".more").show(),$(".word").html("平仓"),$(".word").css("background","#989898"),$(".more").attr("type",0),$(this).attr("src","../image/kong.png"),o=1,$(this).attr("sign",1),d=6):1==o&&(e.play(),d=7,s(),$(".word").html("做空"),$(".word").css("background","green"),$(this).attr("sign",3),$(".more").attr("src","../image/pin1.png"),$(".more").attr("type",2),$(this).hide())}),$(".end").on("click",function(){location.href="../index.html"})});
//# sourceMappingURL=maps/practice.js.map
