{"version":3,"sources":["iscoll-probe.js"],"names":["window","document","Math","IScroll","el","options","this","wrapper","querySelector","scroller","children","scrollerStyle","style","resizeScrollbars","mouseWheelSpeed","snapThreshold","startX","startY","scrollY","directionLockThreshold","momentum","bounce","bounceTime","bounceEasing","preventDefault","preventDefaultException","tagName","HWCompositing","useTransition","useTransform","i","translateZ","utils","hasPerspective","hasTransition","hasTransform","eventPassthrough","scrollX","freeScroll","ease","circular","resizePolling","undefined","tap","shrinkScrollbars","invertWheelDirection","probeType","x","y","directionX","directionY","_events","_init","refresh","scrollTo","enable","createDefaultScrollbar","direction","interactive","type","scrollbar","createElement","indicator","cssText","className","height","width","pointerEvents","appendChild","Indicator","wrapperStyle","indicatorStyle","listenX","listenY","resize","defaultScrollbars","shrink","fade","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","disableTouch","addEvent","disablePointer","prefixPointerEvent","disableMouse","transform","transitionDuration","isBadAndroid","opacity","rAF","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","_prefixStyle","_vendor","charAt","toUpperCase","substr","me","_elementStyle","vendors","l","length","getTime","Date","now","extend","target","obj","fn","capture","addEventListener","removeEvent","removeEventListener","pointerEvent","MSPointerEvent","current","start","time","lowerMargin","wrapperSize","deceleration","destination","duration","distance","speed","abs","round","_transform","hasTouch","hasPointer","PointerEvent","test","navigator","appVersion","transitionTimingFunction","transitionDelay","transformOrigin","hasClass","e","c","RegExp","addClass","newclass","split","push","join","removeClass","re","replace","offset","left","offsetLeft","top","offsetTop","offsetParent","exceptions","eventType","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","pointerdown","pointermove","pointerup","MSPointerDown","MSPointerMove","MSPointerUp","quadratic","k","sqrt","back","elastic","pow","sin","f","PI","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","initMouseEvent","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","_constructed","prototype","version","_initEvents","scrollbars","indicators","_initIndicators","mouseWheel","_initWheel","snap","_initSnap","keyBindings","_initKeys","destroy","_execEvent","_transitionEnd","isInTransition","_transitionTime","resetPosition","_start","button","enabled","initiated","pos","point","touches","moved","distX","distY","directionLocked","startTime","getComputedPosition","_translate","isAnimating","absStartX","absStartY","pointX","pointY","_move","newX","newY","absDistX","absDistY","deltaX","deltaY","timestamp","endTime","hasHorizontalScroll","hasVerticalScroll","maxScrollX","maxScrollY","_end","changedTouches","momentumX","momentumY","distanceX","distanceY","easing","flick","wrapperWidth","wrapperHeight","max","_nearestSnap","currentPage","snapSpeed","min","_resize","that","clearTimeout","resizeTimeout","disable","offsetHeight","clientWidth","clientHeight","scrollerWidth","offsetWidth","scrollerHeight","wrapperOffset","on","off","index","indexOf","splice","apply","slice","call","arguments","scrollBy","_transitionTimingFunction","_animate","scrollToElement","offsetX","offsetY","nodeType","transitionTime","updatePosition","remove","bindToWrapper","matrix","getComputedStyle","_indicatorsMap","interactiveScrollbars","customStyle","fadeScrollbars","concat","_wheel","stopPropagation","wheelDeltaX","wheelDeltaY","wheelTimeout","deltaMode","wheelDelta","detail","goToPage","querySelectorAll","n","cx","cy","m","stepX","snapStepX","stepY","snapStepY","pages","snapThresholdX","snapThresholdY","posX","posY","next","prev","keys","pageUp","pageDown","end","home","up","right","down","charCodeAt","_key","prevTime","keyTime","keyAcceleration","keyCode","destX","destY","easingFn","step","destTime","handleEvent","parentNode","removeChild","lastPointX","lastPointY","_pos","display","bottom","indicatorWidth","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","ignoreBoundaries","val","hold","visible","fadeTimeout","delay","bind","module","exports"],"mappings":"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","file":"../iscoll-probe.js","sourcesContent":["/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */\r\n(function (window, document, Math) {\r\nvar rAF = window.requestAnimationFrame\t||\r\n\twindow.webkitRequestAnimationFrame\t||\r\n\twindow.mozRequestAnimationFrame\t\t||\r\n\twindow.oRequestAnimationFrame\t\t||\r\n\twindow.msRequestAnimationFrame\t\t||\r\n\tfunction (callback) { window.setTimeout(callback, 1000 / 60); };\r\n\r\nvar utils = (function () {\r\n\tvar me = {};\r\n\r\n\tvar _elementStyle = document.createElement('div').style;\r\n\tvar _vendor = (function () {\r\n\t\tvar vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\r\n\t\t\ttransform,\r\n\t\t\ti = 0,\r\n\t\t\tl = vendors.length;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\ttransform = vendors[i] + 'ransform';\r\n\t\t\tif ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\tfunction _prefixStyle (style) {\r\n\t\tif ( _vendor === false ) return false;\r\n\t\tif ( _vendor === '' ) return style;\r\n\t\treturn _vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n\t}\r\n\r\n\tme.getTime = Date.now || function getTime () { return new Date().getTime(); };\r\n\r\n\tme.extend = function (target, obj) {\r\n\t\tfor ( var i in obj ) {\r\n\t\t\ttarget[i] = obj[i];\r\n\t\t}\r\n\t};\r\n\r\n\tme.addEvent = function (el, type, fn, capture) {\r\n\t\tel.addEventListener(type, fn, !!capture);\r\n\t};\r\n\r\n\tme.removeEvent = function (el, type, fn, capture) {\r\n\t\tel.removeEventListener(type, fn, !!capture);\r\n\t};\r\n\r\n\tme.prefixPointerEvent = function (pointerEvent) {\r\n\t\treturn window.MSPointerEvent ? \r\n\t\t\t'MSPointer' + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10):\r\n\t\t\tpointerEvent;\r\n\t};\r\n\r\n\tme.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {\r\n\t\tvar distance = current - start,\r\n\t\t\tspeed = Math.abs(distance) / time,\r\n\t\t\tdestination,\r\n\t\t\tduration;\r\n\r\n\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\r\n\r\n\t\tdestination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );\r\n\t\tduration = speed / deceleration;\r\n\r\n\t\tif ( destination < lowerMargin ) {\r\n\t\t\tdestination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;\r\n\t\t\tdistance = Math.abs(destination - current);\r\n\t\t\tduration = distance / speed;\r\n\t\t} else if ( destination > 0 ) {\r\n\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;\r\n\t\t\tdistance = Math.abs(current) + destination;\r\n\t\t\tduration = distance / speed;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tdestination: Math.round(destination),\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tvar _transform = _prefixStyle('transform');\r\n\r\n\tme.extend(me, {\r\n\t\thasTransform: _transform !== false,\r\n\t\thasPerspective: _prefixStyle('perspective') in _elementStyle,\r\n\t\thasTouch: 'ontouchstart' in window,\r\n\t\thasPointer: window.PointerEvent || window.MSPointerEvent, // IE10 is prefixed\r\n\t\thasTransition: _prefixStyle('transition') in _elementStyle\r\n\t});\r\n\r\n\t// This should find all Android browsers lower than build 535.19 (both stock browser and webview)\r\n\tme.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\\/\\d/.test(window.navigator.appVersion));\r\n\r\n\tme.extend(me.style = {}, {\r\n\t\ttransform: _transform,\r\n\t\ttransitionTimingFunction: _prefixStyle('transitionTimingFunction'),\r\n\t\ttransitionDuration: _prefixStyle('transitionDuration'),\r\n\t\ttransitionDelay: _prefixStyle('transitionDelay'),\r\n\t\ttransformOrigin: _prefixStyle('transformOrigin')\r\n\t});\r\n\r\n\tme.hasClass = function (e, c) {\r\n\t\tvar re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\r\n\t\treturn re.test(e.className);\r\n\t};\r\n\r\n\tme.addClass = function (e, c) {\r\n\t\tif ( me.hasClass(e, c) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar newclass = e.className.split(' ');\r\n\t\tnewclass.push(c);\r\n\t\te.className = newclass.join(' ');\r\n\t};\r\n\r\n\tme.removeClass = function (e, c) {\r\n\t\tif ( !me.hasClass(e, c) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\r\n\t\te.className = e.className.replace(re, ' ');\r\n\t};\r\n\r\n\tme.offset = function (el) {\r\n\t\tvar left = -el.offsetLeft,\r\n\t\t\ttop = -el.offsetTop;\r\n\r\n\t\t// jshint -W084\r\n\t\twhile (el = el.offsetParent) {\r\n\t\t\tleft -= el.offsetLeft;\r\n\t\t\ttop -= el.offsetTop;\r\n\t\t}\r\n\t\t// jshint +W084\r\n\r\n\t\treturn {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top\r\n\t\t};\r\n\t};\r\n\r\n\tme.preventDefaultException = function (el, exceptions) {\r\n\t\tfor ( var i in exceptions ) {\r\n\t\t\tif ( exceptions[i].test(el[i]) ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tme.extend(me.eventType = {}, {\r\n\t\ttouchstart: 1,\r\n\t\ttouchmove: 1,\r\n\t\ttouchend: 1,\r\n\r\n\t\tmousedown: 2,\r\n\t\tmousemove: 2,\r\n\t\tmouseup: 2,\r\n\r\n\t\tpointerdown: 3,\r\n\t\tpointermove: 3,\r\n\t\tpointerup: 3,\r\n\r\n\t\tMSPointerDown: 3,\r\n\t\tMSPointerMove: 3,\r\n\t\tMSPointerUp: 3\r\n\t});\r\n\r\n\tme.extend(me.ease = {}, {\r\n\t\tquadratic: {\r\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\treturn k * ( 2 - k );\r\n\t\t\t}\r\n\t\t},\r\n\t\tcircular: {\r\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\t// Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\r\n\t\t\tfn: function (k) {\r\n\t\t\t\treturn Math.sqrt( 1 - ( --k * k ) );\r\n\t\t\t}\r\n\t\t},\r\n\t\tback: {\r\n\t\t\tstyle: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\tvar b = 4;\r\n\t\t\t\treturn ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbounce: {\r\n\t\t\tstyle: '',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\tif ( ( k /= 1 ) < ( 1 / 2.75 ) ) {\r\n\t\t\t\t\treturn 7.5625 * k * k;\r\n\t\t\t\t} else if ( k < ( 2 / 2.75 ) ) {\r\n\t\t\t\t\treturn 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\r\n\t\t\t\t} else if ( k < ( 2.5 / 2.75 ) ) {\r\n\t\t\t\t\treturn 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\telastic: {\r\n\t\t\tstyle: '',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\tvar f = 0.22,\r\n\t\t\t\t\te = 0.4;\r\n\r\n\t\t\t\tif ( k === 0 ) { return 0; }\r\n\t\t\t\tif ( k == 1 ) { return 1; }\r\n\r\n\t\t\t\treturn ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tme.tap = function (e, eventName) {\r\n\t\tvar ev = document.createEvent('Event');\r\n\t\tev.initEvent(eventName, true, true);\r\n\t\tev.pageX = e.pageX;\r\n\t\tev.pageY = e.pageY;\r\n\t\te.target.dispatchEvent(ev);\r\n\t};\r\n\r\n\tme.click = function (e) {\r\n\t\tvar target = e.target,\r\n\t\t\tev;\r\n\r\n\t\tif ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {\r\n\t\t\tev = document.createEvent('MouseEvents');\r\n\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\r\n\t\t\t\ttarget.screenX, target.screenY, target.clientX, target.clientY,\r\n\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\r\n\t\t\t\t0, null);\r\n\r\n\t\t\tev._constructed = true;\r\n\t\t\ttarget.dispatchEvent(ev);\r\n\t\t}\r\n\t};\r\n\r\n\treturn me;\r\n})();\r\n\r\nfunction IScroll (el, options) {\r\n\tthis.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\r\n\tthis.scroller = this.wrapper.children[0];\r\n\tthis.scrollerStyle = this.scroller.style;\t\t// cache style for better performance\r\n\r\n\tthis.options = {\r\n\r\n\t\tresizeScrollbars: true,\r\n\r\n\t\tmouseWheelSpeed: 20,\r\n\r\n\t\tsnapThreshold: 0.334,\r\n\r\n// INSERT POINT: OPTIONS \r\n\r\n\t\tstartX: 0,\r\n\t\tstartY: 0,\r\n\t\tscrollY: true,\r\n\t\tdirectionLockThreshold: 5,\r\n\t\tmomentum: true,\r\n\r\n\t\tbounce: true,\r\n\t\tbounceTime: 600,\r\n\t\tbounceEasing: '',\r\n\r\n\t\tpreventDefault: true,\r\n\t\tpreventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },\r\n\r\n\t\tHWCompositing: true,\r\n\t\tuseTransition: true,\r\n\t\tuseTransform: true\r\n\t};\r\n\r\n\tfor ( var i in options ) {\r\n\t\tthis.options[i] = options[i];\r\n\t}\r\n\r\n\t// Normalize options\r\n\tthis.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\r\n\r\n\tthis.options.useTransition = utils.hasTransition && this.options.useTransition;\r\n\tthis.options.useTransform = utils.hasTransform && this.options.useTransform;\r\n\r\n\tthis.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\r\n\tthis.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\r\n\r\n\t// If you want eventPassthrough I have to lock one of the axes\r\n\tthis.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\r\n\tthis.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;\r\n\r\n\t// With eventPassthrough we also need lockDirection mechanism\r\n\tthis.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\r\n\tthis.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\r\n\r\n\tthis.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\r\n\r\n\tthis.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\r\n\r\n\tif ( this.options.tap === true ) {\r\n\t\tthis.options.tap = 'tap';\r\n\t}\r\n\r\n\tif ( this.options.shrinkScrollbars == 'scale' ) {\r\n\t\tthis.options.useTransition = false;\r\n\t}\r\n\r\n\tthis.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;\r\n\r\n\tif ( this.options.probeType == 3 ) {\r\n\t\tthis.options.useTransition = false;\t}\r\n\r\n// INSERT POINT: NORMALIZATION\r\n\r\n\t// Some defaults\t\r\n\tthis.x = 0;\r\n\tthis.y = 0;\r\n\tthis.directionX = 0;\r\n\tthis.directionY = 0;\r\n\tthis._events = {};\r\n\r\n// INSERT POINT: DEFAULTS\r\n\r\n\tthis._init();\r\n\tthis.refresh();\r\n\r\n\tthis.scrollTo(this.options.startX, this.options.startY);\r\n\tthis.enable();\r\n}\r\n\r\nIScroll.prototype = {\r\n\tversion: '5.1.3',\r\n\r\n\t_init: function () {\r\n\t\tthis._initEvents();\r\n\r\n\t\tif ( this.options.scrollbars || this.options.indicators ) {\r\n\t\t\tthis._initIndicators();\r\n\t\t}\r\n\r\n\t\tif ( this.options.mouseWheel ) {\r\n\t\t\tthis._initWheel();\r\n\t\t}\r\n\r\n\t\tif ( this.options.snap ) {\r\n\t\t\tthis._initSnap();\r\n\t\t}\r\n\r\n\t\tif ( this.options.keyBindings ) {\r\n\t\t\tthis._initKeys();\r\n\t\t}\r\n\r\n// INSERT POINT: _init\r\n\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\tthis._initEvents(true);\r\n\r\n\t\tthis._execEvent('destroy');\r\n\t},\r\n\r\n\t_transitionEnd: function (e) {\r\n\t\tif ( e.target != this.scroller || !this.isInTransition ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._transitionTime();\r\n\t\tif ( !this.resetPosition(this.options.bounceTime) ) {\r\n\t\t\tthis.isInTransition = false;\r\n\t\t\tthis._execEvent('scrollEnd');\r\n\t\t}\r\n\t},\r\n\r\n\t_start: function (e) {\r\n\t\t// React to left mouse button only\r\n\t\tif ( utils.eventType[e.type] != 1 ) {\r\n\t\t\tif ( e.button !== 0 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar point = e.touches ? e.touches[0] : e,\r\n\t\t\tpos;\r\n\r\n\t\tthis.initiated\t= utils.eventType[e.type];\r\n\t\tthis.moved\t\t= false;\r\n\t\tthis.distX\t\t= 0;\r\n\t\tthis.distY\t\t= 0;\r\n\t\tthis.directionX = 0;\r\n\t\tthis.directionY = 0;\r\n\t\tthis.directionLocked = 0;\r\n\r\n\t\tthis._transitionTime();\r\n\r\n\t\tthis.startTime = utils.getTime();\r\n\r\n\t\tif ( this.options.useTransition && this.isInTransition ) {\r\n\t\t\tthis.isInTransition = false;\r\n\t\t\tpos = this.getComputedPosition();\r\n\t\t\tthis._translate(Math.round(pos.x), Math.round(pos.y));\r\n\t\t\tthis._execEvent('scrollEnd');\r\n\t\t} else if ( !this.options.useTransition && this.isAnimating ) {\r\n\t\t\tthis.isAnimating = false;\r\n\t\t\tthis._execEvent('scrollEnd');\r\n\t\t}\r\n\r\n\t\tthis.startX    = this.x;\r\n\t\tthis.startY    = this.y;\r\n\t\tthis.absStartX = this.x;\r\n\t\tthis.absStartY = this.y;\r\n\t\tthis.pointX    = point.pageX;\r\n\t\tthis.pointY    = point.pageY;\r\n\r\n\t\tthis._execEvent('beforeScrollStart');\r\n\t},\r\n\r\n\t_move: function (e) {\r\n\t\tif ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.options.preventDefault ) {\t// increases performance on Android? TODO: check!\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar point\t\t= e.touches ? e.touches[0] : e,\r\n\t\t\tdeltaX\t\t= point.pageX - this.pointX,\r\n\t\t\tdeltaY\t\t= point.pageY - this.pointY,\r\n\t\t\ttimestamp\t= utils.getTime(),\r\n\t\t\tnewX, newY,\r\n\t\t\tabsDistX, absDistY;\r\n\r\n\t\tthis.pointX\t\t= point.pageX;\r\n\t\tthis.pointY\t\t= point.pageY;\r\n\r\n\t\tthis.distX\t\t+= deltaX;\r\n\t\tthis.distY\t\t+= deltaY;\r\n\t\tabsDistX\t\t= Math.abs(this.distX);\r\n\t\tabsDistY\t\t= Math.abs(this.distY);\r\n\r\n\t\t// We need to move at least 10 pixels for the scrolling to initiate\r\n\t\tif ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If you are scrolling in one direction lock the other\r\n\t\tif ( !this.directionLocked && !this.options.freeScroll ) {\r\n\t\t\tif ( absDistX > absDistY + this.options.directionLockThreshold ) {\r\n\t\t\t\tthis.directionLocked = 'h';\t\t// lock horizontally\r\n\t\t\t} else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {\r\n\t\t\t\tthis.directionLocked = 'v';\t\t// lock vertically\r\n\t\t\t} else {\r\n\t\t\t\tthis.directionLocked = 'n';\t\t// no lock\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.directionLocked == 'h' ) {\r\n\t\t\tif ( this.options.eventPassthrough == 'vertical' ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else if ( this.options.eventPassthrough == 'horizontal' ) {\r\n\t\t\t\tthis.initiated = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdeltaY = 0;\r\n\t\t} else if ( this.directionLocked == 'v' ) {\r\n\t\t\tif ( this.options.eventPassthrough == 'horizontal' ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else if ( this.options.eventPassthrough == 'vertical' ) {\r\n\t\t\t\tthis.initiated = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdeltaX = 0;\r\n\t\t}\r\n\r\n\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\r\n\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\r\n\r\n\t\tnewX = this.x + deltaX;\r\n\t\tnewY = this.y + deltaY;\r\n\r\n\t\t// Slow down if outside of the boundaries\r\n\t\tif ( newX > 0 || newX < this.maxScrollX ) {\r\n\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\r\n\t\t}\r\n\t\tif ( newY > 0 || newY < this.maxScrollY ) {\r\n\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthis.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\r\n\t\tthis.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\r\n\r\n\t\tif ( !this.moved ) {\r\n\t\t\tthis._execEvent('scrollStart');\r\n\t\t}\r\n\r\n\t\tthis.moved = true;\r\n\r\n\t\tthis._translate(newX, newY);\r\n\r\n/* REPLACE START: _move */\r\n\t\tif ( timestamp - this.startTime > 300 ) {\r\n\t\t\tthis.startTime = timestamp;\r\n\t\t\tthis.startX = this.x;\r\n\t\t\tthis.startY = this.y;\r\n\r\n\t\t\tif ( this.options.probeType == 1 ) {\r\n\t\t\t\tthis._execEvent('scroll');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.options.probeType > 1 ) {\r\n\t\t\tthis._execEvent('scroll');\r\n\t\t}\r\n/* REPLACE END: _move */\r\n\r\n\t},\r\n\r\n\t_end: function (e) {\r\n\t\tif ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar point = e.changedTouches ? e.changedTouches[0] : e,\r\n\t\t\tmomentumX,\r\n\t\t\tmomentumY,\r\n\t\t\tduration = utils.getTime() - this.startTime,\r\n\t\t\tnewX = Math.round(this.x),\r\n\t\t\tnewY = Math.round(this.y),\r\n\t\t\tdistanceX = Math.abs(newX - this.startX),\r\n\t\t\tdistanceY = Math.abs(newY - this.startY),\r\n\t\t\ttime = 0,\r\n\t\t\teasing = '';\r\n\r\n\t\tthis.isInTransition = 0;\r\n\t\tthis.initiated = 0;\r\n\t\tthis.endTime = utils.getTime();\r\n\r\n\t\t// reset if we are outside of the boundaries\r\n\t\tif ( this.resetPosition(this.options.bounceTime) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(newX, newY);\t// ensures that the last position is rounded\r\n\r\n\t\t// we scrolled less than 10 pixels\r\n\t\tif ( !this.moved ) {\r\n\t\t\tif ( this.options.tap ) {\r\n\t\t\t\tutils.tap(e, this.options.tap);\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.options.click ) {\r\n\t\t\t\tutils.click(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._execEvent('scrollCancel');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {\r\n\t\t\tthis._execEvent('flick');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// start momentum animation if needed\r\n\t\tif ( this.options.momentum && duration < 300 ) {\r\n\t\t\tmomentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };\r\n\t\t\tmomentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };\r\n\t\t\tnewX = momentumX.destination;\r\n\t\t\tnewY = momentumY.destination;\r\n\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\r\n\t\t\tthis.isInTransition = 1;\r\n\t\t}\r\n\r\n\r\n\t\tif ( this.options.snap ) {\r\n\t\t\tvar snap = this._nearestSnap(newX, newY);\r\n\t\t\tthis.currentPage = snap;\r\n\t\t\ttime = this.options.snapSpeed || Math.max(\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\tMath.min(Math.abs(newX - snap.x), 1000),\r\n\t\t\t\t\t\tMath.min(Math.abs(newY - snap.y), 1000)\r\n\t\t\t\t\t), 300);\r\n\t\t\tnewX = snap.x;\r\n\t\t\tnewY = snap.y;\r\n\r\n\t\t\tthis.directionX = 0;\r\n\t\t\tthis.directionY = 0;\r\n\t\t\teasing = this.options.bounceEasing;\r\n\t\t}\r\n\r\n// INSERT POINT: _end\r\n\r\n\t\tif ( newX != this.x || newY != this.y ) {\r\n\t\t\t// change easing function when scroller goes out of the boundaries\r\n\t\t\tif ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {\r\n\t\t\t\teasing = utils.ease.quadratic;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(newX, newY, time, easing);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._execEvent('scrollEnd');\r\n\t},\r\n\r\n\t_resize: function () {\r\n\t\tvar that = this;\r\n\r\n\t\tclearTimeout(this.resizeTimeout);\r\n\r\n\t\tthis.resizeTimeout = setTimeout(function () {\r\n\t\t\tthat.refresh();\r\n\t\t}, this.options.resizePolling);\r\n\t},\r\n\r\n\tresetPosition: function (time) {\r\n\t\tvar x = this.x,\r\n\t\t\ty = this.y;\r\n\r\n\t\ttime = time || 0;\r\n\r\n\t\tif ( !this.hasHorizontalScroll || this.x > 0 ) {\r\n\t\t\tx = 0;\r\n\t\t} else if ( this.x < this.maxScrollX ) {\r\n\t\t\tx = this.maxScrollX;\r\n\t\t}\r\n\r\n\t\tif ( !this.hasVerticalScroll || this.y > 0 ) {\r\n\t\t\ty = 0;\r\n\t\t} else if ( this.y < this.maxScrollY ) {\r\n\t\t\ty = this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tif ( x == this.x && y == this.y ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(x, y, time, this.options.bounceEasing);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.enabled = false;\r\n\t},\r\n\r\n\tenable: function () {\r\n\t\tthis.enabled = true;\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tvar rf = this.wrapper.offsetHeight;\t\t// Force reflow\r\n\r\n\t\tthis.wrapperWidth\t= this.wrapper.clientWidth;\r\n\t\tthis.wrapperHeight\t= this.wrapper.clientHeight;\r\n\r\n/* REPLACE START: refresh */\r\n\r\n\t\tthis.scrollerWidth\t= this.scroller.offsetWidth;\r\n\t\tthis.scrollerHeight\t= this.scroller.offsetHeight;\r\n\r\n\t\tthis.maxScrollX\t\t= this.wrapperWidth - this.scrollerWidth;\r\n\t\tthis.maxScrollY\t\t= this.wrapperHeight - this.scrollerHeight;\r\n\r\n/* REPLACE END: refresh */\r\n\r\n\t\tthis.hasHorizontalScroll\t= this.options.scrollX && this.maxScrollX < 0;\r\n\t\tthis.hasVerticalScroll\t\t= this.options.scrollY && this.maxScrollY < 0;\r\n\r\n\t\tif ( !this.hasHorizontalScroll ) {\r\n\t\t\tthis.maxScrollX = 0;\r\n\t\t\tthis.scrollerWidth = this.wrapperWidth;\r\n\t\t}\r\n\r\n\t\tif ( !this.hasVerticalScroll ) {\r\n\t\t\tthis.maxScrollY = 0;\r\n\t\t\tthis.scrollerHeight = this.wrapperHeight;\r\n\t\t}\r\n\r\n\t\tthis.endTime = 0;\r\n\t\tthis.directionX = 0;\r\n\t\tthis.directionY = 0;\r\n\r\n\t\tthis.wrapperOffset = utils.offset(this.wrapper);\r\n\r\n\t\tthis._execEvent('refresh');\r\n\r\n\t\tthis.resetPosition();\r\n\r\n// INSERT POINT: _refresh\r\n\r\n\t},\r\n\r\n\ton: function (type, fn) {\r\n\t\tif ( !this._events[type] ) {\r\n\t\t\tthis._events[type] = [];\r\n\t\t}\r\n\r\n\t\tthis._events[type].push(fn);\r\n\t},\r\n\r\n\toff: function (type, fn) {\r\n\t\tif ( !this._events[type] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar index = this._events[type].indexOf(fn);\r\n\r\n\t\tif ( index > -1 ) {\r\n\t\t\tthis._events[type].splice(index, 1);\r\n\t\t}\r\n\t},\r\n\r\n\t_execEvent: function (type) {\r\n\t\tif ( !this._events[type] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i = 0,\r\n\t\t\tl = this._events[type].length;\r\n\r\n\t\tif ( !l ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tthis._events[type][i].apply(this, [].slice.call(arguments, 1));\r\n\t\t}\r\n\t},\r\n\r\n\tscrollBy: function (x, y, time, easing) {\r\n\t\tx = this.x + x;\r\n\t\ty = this.y + y;\r\n\t\ttime = time || 0;\r\n\r\n\t\tthis.scrollTo(x, y, time, easing);\r\n\t},\r\n\r\n\tscrollTo: function (x, y, time, easing) {\r\n\t\teasing = easing || utils.ease.circular;\r\n\r\n\t\tthis.isInTransition = this.options.useTransition && time > 0;\r\n\r\n\t\tif ( !time || (this.options.useTransition && easing.style) ) {\r\n\t\t\tthis._transitionTimingFunction(easing.style);\r\n\t\t\tthis._transitionTime(time);\r\n\t\t\tthis._translate(x, y);\r\n\t\t} else {\r\n\t\t\tthis._animate(x, y, time, easing.fn);\r\n\t\t}\r\n\t},\r\n\r\n\tscrollToElement: function (el, time, offsetX, offsetY, easing) {\r\n\t\tel = el.nodeType ? el : this.scroller.querySelector(el);\r\n\r\n\t\tif ( !el ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar pos = utils.offset(el);\r\n\r\n\t\tpos.left -= this.wrapperOffset.left;\r\n\t\tpos.top  -= this.wrapperOffset.top;\r\n\r\n\t\t// if offsetX/Y are true we center the element to the screen\r\n\t\tif ( offsetX === true ) {\r\n\t\t\toffsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\r\n\t\t}\r\n\t\tif ( offsetY === true ) {\r\n\t\t\toffsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\r\n\t\t}\r\n\r\n\t\tpos.left -= offsetX || 0;\r\n\t\tpos.top  -= offsetY || 0;\r\n\r\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\r\n\t\tpos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;\r\n\r\n\t\ttime = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;\r\n\r\n\t\tthis.scrollTo(pos.left, pos.top, time, easing);\r\n\t},\r\n\r\n\t_transitionTime: function (time) {\r\n\t\ttime = time || 0;\r\n\r\n\t\tthis.scrollerStyle[utils.style.transitionDuration] = time + 'ms';\r\n\r\n\t\tif ( !time && utils.isBadAndroid ) {\r\n\t\t\tthis.scrollerStyle[utils.style.transitionDuration] = '0.001s';\r\n\t\t}\r\n\r\n\r\n\t\tif ( this.indicators ) {\r\n\t\t\tfor ( var i = this.indicators.length; i--; ) {\r\n\t\t\t\tthis.indicators[i].transitionTime(time);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n// INSERT POINT: _transitionTime\r\n\r\n\t},\r\n\r\n\t_transitionTimingFunction: function (easing) {\r\n\t\tthis.scrollerStyle[utils.style.transitionTimingFunction] = easing;\r\n\r\n\r\n\t\tif ( this.indicators ) {\r\n\t\t\tfor ( var i = this.indicators.length; i--; ) {\r\n\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n// INSERT POINT: _transitionTimingFunction\r\n\r\n\t},\r\n\r\n\t_translate: function (x, y) {\r\n\t\tif ( this.options.useTransform ) {\r\n\r\n/* REPLACE START: _translate */\r\n\r\n\t\t\tthis.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\r\n\r\n/* REPLACE END: _translate */\r\n\r\n\t\t} else {\r\n\t\t\tx = Math.round(x);\r\n\t\t\ty = Math.round(y);\r\n\t\t\tthis.scrollerStyle.left = x + 'px';\r\n\t\t\tthis.scrollerStyle.top = y + 'px';\r\n\t\t}\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\r\n\tif ( this.indicators ) {\r\n\t\tfor ( var i = this.indicators.length; i--; ) {\r\n\t\t\tthis.indicators[i].updatePosition();\r\n\t\t}\r\n\t}\r\n\r\n\r\n// INSERT POINT: _translate\r\n\r\n\t},\r\n\r\n\t_initEvents: function (remove) {\r\n\t\tvar eventType = remove ? utils.removeEvent : utils.addEvent,\r\n\t\t\ttarget = this.options.bindToWrapper ? this.wrapper : window;\r\n\r\n\t\teventType(window, 'orientationchange', this);\r\n\t\teventType(window, 'resize', this);\r\n\r\n\t\tif ( this.options.click ) {\r\n\t\t\teventType(this.wrapper, 'click', this, true);\r\n\t\t}\r\n\r\n\t\tif ( !this.options.disableMouse ) {\r\n\t\t\teventType(this.wrapper, 'mousedown', this);\r\n\t\t\teventType(target, 'mousemove', this);\r\n\t\t\teventType(target, 'mousecancel', this);\r\n\t\t\teventType(target, 'mouseup', this);\r\n\t\t}\r\n\r\n\t\tif ( utils.hasPointer && !this.options.disablePointer ) {\r\n\t\t\teventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\r\n\t\t\teventType(target, utils.prefixPointerEvent('pointermove'), this);\r\n\t\t\teventType(target, utils.prefixPointerEvent('pointercancel'), this);\r\n\t\t\teventType(target, utils.prefixPointerEvent('pointerup'), this);\r\n\t\t}\r\n\r\n\t\tif ( utils.hasTouch && !this.options.disableTouch ) {\r\n\t\t\teventType(this.wrapper, 'touchstart', this);\r\n\t\t\teventType(target, 'touchmove', this);\r\n\t\t\teventType(target, 'touchcancel', this);\r\n\t\t\teventType(target, 'touchend', this);\r\n\t\t}\r\n\r\n\t\teventType(this.scroller, 'transitionend', this);\r\n\t\teventType(this.scroller, 'webkitTransitionEnd', this);\r\n\t\teventType(this.scroller, 'oTransitionEnd', this);\r\n\t\teventType(this.scroller, 'MSTransitionEnd', this);\r\n\t},\r\n\r\n\tgetComputedPosition: function () {\r\n\t\tvar matrix = window.getComputedStyle(this.scroller, null),\r\n\t\t\tx, y;\r\n\r\n\t\tif ( this.options.useTransform ) {\r\n\t\t\tmatrix = matrix[utils.style.transform].split(')')[0].split(', ');\r\n\t\t\tx = +(matrix[12] || matrix[4]);\r\n\t\t\ty = +(matrix[13] || matrix[5]);\r\n\t\t} else {\r\n\t\t\tx = +matrix.left.replace(/[^-\\d.]/g, '');\r\n\t\t\ty = +matrix.top.replace(/[^-\\d.]/g, '');\r\n\t\t}\r\n\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\r\n\t_initIndicators: function () {\r\n\t\tvar interactive = this.options.interactiveScrollbars,\r\n\t\t\tcustomStyle = typeof this.options.scrollbars != 'string',\r\n\t\t\tindicators = [],\r\n\t\t\tindicator;\r\n\r\n\t\tvar that = this;\r\n\r\n\t\tthis.indicators = [];\r\n\r\n\t\tif ( this.options.scrollbars ) {\r\n\t\t\t// Vertical scrollbar\r\n\t\t\tif ( this.options.scrollY ) {\r\n\t\t\t\tindicator = {\r\n\t\t\t\t\tel: createDefaultScrollbar('v', interactive, this.options.scrollbars),\r\n\t\t\t\t\tinteractive: interactive,\r\n\t\t\t\t\tdefaultScrollbars: true,\r\n\t\t\t\t\tcustomStyle: customStyle,\r\n\t\t\t\t\tresize: this.options.resizeScrollbars,\r\n\t\t\t\t\tshrink: this.options.shrinkScrollbars,\r\n\t\t\t\t\tfade: this.options.fadeScrollbars,\r\n\t\t\t\t\tlistenX: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\r\n\t\t\t\tindicators.push(indicator);\r\n\t\t\t}\r\n\r\n\t\t\t// Horizontal scrollbar\r\n\t\t\tif ( this.options.scrollX ) {\r\n\t\t\t\tindicator = {\r\n\t\t\t\t\tel: createDefaultScrollbar('h', interactive, this.options.scrollbars),\r\n\t\t\t\t\tinteractive: interactive,\r\n\t\t\t\t\tdefaultScrollbars: true,\r\n\t\t\t\t\tcustomStyle: customStyle,\r\n\t\t\t\t\tresize: this.options.resizeScrollbars,\r\n\t\t\t\t\tshrink: this.options.shrinkScrollbars,\r\n\t\t\t\t\tfade: this.options.fadeScrollbars,\r\n\t\t\t\t\tlistenY: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\r\n\t\t\t\tindicators.push(indicator);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.options.indicators ) {\r\n\t\t\t// TODO: check concat compatibility\r\n\t\t\tindicators = indicators.concat(this.options.indicators);\r\n\t\t}\r\n\r\n\t\tfor ( var i = indicators.length; i--; ) {\r\n\t\t\tthis.indicators.push( new Indicator(this, indicators[i]) );\r\n\t\t}\r\n\r\n\t\t// TODO: check if we can use array.map (wide compatibility and performance issues)\r\n\t\tfunction _indicatorsMap (fn) {\r\n\t\t\tfor ( var i = that.indicators.length; i--; ) {\r\n\t\t\t\tfn.call(that.indicators[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.options.fadeScrollbars ) {\r\n\t\t\tthis.on('scrollEnd', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.on('scrollCancel', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.on('scrollStart', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade(1);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.on('beforeScrollStart', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade(1, true);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tthis.on('refresh', function () {\r\n\t\t\t_indicatorsMap(function () {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.on('destroy', function () {\r\n\t\t\t_indicatorsMap(function () {\r\n\t\t\t\tthis.destroy();\r\n\t\t\t});\r\n\r\n\t\t\tdelete this.indicators;\r\n\t\t});\r\n\t},\r\n\r\n\t_initWheel: function () {\r\n\t\tutils.addEvent(this.wrapper, 'wheel', this);\r\n\t\tutils.addEvent(this.wrapper, 'mousewheel', this);\r\n\t\tutils.addEvent(this.wrapper, 'DOMMouseScroll', this);\r\n\r\n\t\tthis.on('destroy', function () {\r\n\t\t\tutils.removeEvent(this.wrapper, 'wheel', this);\r\n\t\t\tutils.removeEvent(this.wrapper, 'mousewheel', this);\r\n\t\t\tutils.removeEvent(this.wrapper, 'DOMMouseScroll', this);\r\n\t\t});\r\n\t},\r\n\r\n\t_wheel: function (e) {\r\n\t\tif ( !this.enabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\tvar wheelDeltaX, wheelDeltaY,\r\n\t\t\tnewX, newY,\r\n\t\t\tthat = this;\r\n\r\n\t\tif ( this.wheelTimeout === undefined ) {\r\n\t\t\tthat._execEvent('scrollStart');\r\n\t\t}\r\n\r\n\t\t// Execute the scrollEnd event after 400ms the wheel stopped scrolling\r\n\t\tclearTimeout(this.wheelTimeout);\r\n\t\tthis.wheelTimeout = setTimeout(function () {\r\n\t\t\tthat._execEvent('scrollEnd');\r\n\t\t\tthat.wheelTimeout = undefined;\r\n\t\t}, 400);\r\n\r\n\t\tif ( 'deltaX' in e ) {\r\n\t\t\tif (e.deltaMode === 1) {\r\n\t\t\t\twheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;\r\n\t\t\t\twheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;\r\n\t\t\t} else {\r\n\t\t\t\twheelDeltaX = -e.deltaX;\r\n\t\t\t\twheelDeltaY = -e.deltaY;\r\n\t\t\t}\r\n\t\t} else if ( 'wheelDeltaX' in e ) {\r\n\t\t\twheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;\r\n\t\t\twheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;\r\n\t\t} else if ( 'wheelDelta' in e ) {\r\n\t\t\twheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;\r\n\t\t} else if ( 'detail' in e ) {\r\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twheelDeltaX *= this.options.invertWheelDirection;\r\n\t\twheelDeltaY *= this.options.invertWheelDirection;\r\n\r\n\t\tif ( !this.hasVerticalScroll ) {\r\n\t\t\twheelDeltaX = wheelDeltaY;\r\n\t\t\twheelDeltaY = 0;\r\n\t\t}\r\n\r\n\t\tif ( this.options.snap ) {\r\n\t\t\tnewX = this.currentPage.pageX;\r\n\t\t\tnewY = this.currentPage.pageY;\r\n\r\n\t\t\tif ( wheelDeltaX > 0 ) {\r\n\t\t\t\tnewX--;\r\n\t\t\t} else if ( wheelDeltaX < 0 ) {\r\n\t\t\t\tnewX++;\r\n\t\t\t}\r\n\r\n\t\t\tif ( wheelDeltaY > 0 ) {\r\n\t\t\t\tnewY--;\r\n\t\t\t} else if ( wheelDeltaY < 0 ) {\r\n\t\t\t\tnewY++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.goToPage(newX, newY);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\r\n\t\tnewY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\r\n\r\n\t\tif ( newX > 0 ) {\r\n\t\t\tnewX = 0;\r\n\t\t} else if ( newX < this.maxScrollX ) {\r\n\t\t\tnewX = this.maxScrollX;\r\n\t\t}\r\n\r\n\t\tif ( newY > 0 ) {\r\n\t\t\tnewY = 0;\r\n\t\t} else if ( newY < this.maxScrollY ) {\r\n\t\t\tnewY = this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(newX, newY, 0);\r\n\r\n\t\tif ( this.options.probeType > 1 ) {\r\n\t\t\tthis._execEvent('scroll');\r\n\t\t}\r\n\r\n// INSERT POINT: _wheel\r\n\t},\r\n\r\n\t_initSnap: function () {\r\n\t\tthis.currentPage = {};\r\n\r\n\t\tif ( typeof this.options.snap == 'string' ) {\r\n\t\t\tthis.options.snap = this.scroller.querySelectorAll(this.options.snap);\r\n\t\t}\r\n\r\n\t\tthis.on('refresh', function () {\r\n\t\t\tvar i = 0, l,\r\n\t\t\t\tm = 0, n,\r\n\t\t\t\tcx, cy,\r\n\t\t\t\tx = 0, y,\r\n\t\t\t\tstepX = this.options.snapStepX || this.wrapperWidth,\r\n\t\t\t\tstepY = this.options.snapStepY || this.wrapperHeight,\r\n\t\t\t\tel;\r\n\r\n\t\t\tthis.pages = [];\r\n\r\n\t\t\tif ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.options.snap === true ) {\r\n\t\t\t\tcx = Math.round( stepX / 2 );\r\n\t\t\t\tcy = Math.round( stepY / 2 );\r\n\r\n\t\t\t\twhile ( x > -this.scrollerWidth ) {\r\n\t\t\t\t\tthis.pages[i] = [];\r\n\t\t\t\t\tl = 0;\r\n\t\t\t\t\ty = 0;\r\n\r\n\t\t\t\t\twhile ( y > -this.scrollerHeight ) {\r\n\t\t\t\t\t\tthis.pages[i][l] = {\r\n\t\t\t\t\t\t\tx: Math.max(x, this.maxScrollX),\r\n\t\t\t\t\t\t\ty: Math.max(y, this.maxScrollY),\r\n\t\t\t\t\t\t\twidth: stepX,\r\n\t\t\t\t\t\t\theight: stepY,\r\n\t\t\t\t\t\t\tcx: x - cx,\r\n\t\t\t\t\t\t\tcy: y - cy\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\ty -= stepY;\r\n\t\t\t\t\t\tl++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tx -= stepX;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tel = this.options.snap;\r\n\t\t\t\tl = el.length;\r\n\t\t\t\tn = -1;\r\n\r\n\t\t\t\tfor ( ; i < l; i++ ) {\r\n\t\t\t\t\tif ( i === 0 || el[i].offsetLeft <= el[i-1].offsetLeft ) {\r\n\t\t\t\t\t\tm = 0;\r\n\t\t\t\t\t\tn++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( !this.pages[m] ) {\r\n\t\t\t\t\t\tthis.pages[m] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tx = Math.max(-el[i].offsetLeft, this.maxScrollX);\r\n\t\t\t\t\ty = Math.max(-el[i].offsetTop, this.maxScrollY);\r\n\t\t\t\t\tcx = x - Math.round(el[i].offsetWidth / 2);\r\n\t\t\t\t\tcy = y - Math.round(el[i].offsetHeight / 2);\r\n\r\n\t\t\t\t\tthis.pages[m][n] = {\r\n\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\twidth: el[i].offsetWidth,\r\n\t\t\t\t\t\theight: el[i].offsetHeight,\r\n\t\t\t\t\t\tcx: cx,\r\n\t\t\t\t\t\tcy: cy\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif ( x > this.maxScrollX ) {\r\n\t\t\t\t\t\tm++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);\r\n\r\n\t\t\t// Update snap threshold if needed\r\n\t\t\tif ( this.options.snapThreshold % 1 === 0 ) {\r\n\t\t\t\tthis.snapThresholdX = this.options.snapThreshold;\r\n\t\t\t\tthis.snapThresholdY = this.options.snapThreshold;\r\n\t\t\t} else {\r\n\t\t\t\tthis.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);\r\n\t\t\t\tthis.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.on('flick', function () {\r\n\t\t\tvar time = this.options.snapSpeed || Math.max(\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\tMath.min(Math.abs(this.x - this.startX), 1000),\r\n\t\t\t\t\t\tMath.min(Math.abs(this.y - this.startY), 1000)\r\n\t\t\t\t\t), 300);\r\n\r\n\t\t\tthis.goToPage(\r\n\t\t\t\tthis.currentPage.pageX + this.directionX,\r\n\t\t\t\tthis.currentPage.pageY + this.directionY,\r\n\t\t\t\ttime\r\n\t\t\t);\r\n\t\t});\r\n\t},\r\n\r\n\t_nearestSnap: function (x, y) {\r\n\t\tif ( !this.pages.length ) {\r\n\t\t\treturn { x: 0, y: 0, pageX: 0, pageY: 0 };\r\n\t\t}\r\n\r\n\t\tvar i = 0,\r\n\t\t\tl = this.pages.length,\r\n\t\t\tm = 0;\r\n\r\n\t\t// Check if we exceeded the snap threshold\r\n\t\tif ( Math.abs(x - this.absStartX) < this.snapThresholdX &&\r\n\t\t\tMath.abs(y - this.absStartY) < this.snapThresholdY ) {\r\n\t\t\treturn this.currentPage;\r\n\t\t}\r\n\r\n\t\tif ( x > 0 ) {\r\n\t\t\tx = 0;\r\n\t\t} else if ( x < this.maxScrollX ) {\r\n\t\t\tx = this.maxScrollX;\r\n\t\t}\r\n\r\n\t\tif ( y > 0 ) {\r\n\t\t\ty = 0;\r\n\t\t} else if ( y < this.maxScrollY ) {\r\n\t\t\ty = this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tif ( x >= this.pages[i][0].cx ) {\r\n\t\t\t\tx = this.pages[i][0].x;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tl = this.pages[i].length;\r\n\r\n\t\tfor ( ; m < l; m++ ) {\r\n\t\t\tif ( y >= this.pages[0][m].cy ) {\r\n\t\t\t\ty = this.pages[0][m].y;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( i == this.currentPage.pageX ) {\r\n\t\t\ti += this.directionX;\r\n\r\n\t\t\tif ( i < 0 ) {\r\n\t\t\t\ti = 0;\r\n\t\t\t} else if ( i >= this.pages.length ) {\r\n\t\t\t\ti = this.pages.length - 1;\r\n\t\t\t}\r\n\r\n\t\t\tx = this.pages[i][0].x;\r\n\t\t}\r\n\r\n\t\tif ( m == this.currentPage.pageY ) {\r\n\t\t\tm += this.directionY;\r\n\r\n\t\t\tif ( m < 0 ) {\r\n\t\t\t\tm = 0;\r\n\t\t\t} else if ( m >= this.pages[0].length ) {\r\n\t\t\t\tm = this.pages[0].length - 1;\r\n\t\t\t}\r\n\r\n\t\t\ty = this.pages[0][m].y;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\tpageX: i,\r\n\t\t\tpageY: m\r\n\t\t};\r\n\t},\r\n\r\n\tgoToPage: function (x, y, time, easing) {\r\n\t\teasing = easing || this.options.bounceEasing;\r\n\r\n\t\tif ( x >= this.pages.length ) {\r\n\t\t\tx = this.pages.length - 1;\r\n\t\t} else if ( x < 0 ) {\r\n\t\t\tx = 0;\r\n\t\t}\r\n\r\n\t\tif ( y >= this.pages[x].length ) {\r\n\t\t\ty = this.pages[x].length - 1;\r\n\t\t} else if ( y < 0 ) {\r\n\t\t\ty = 0;\r\n\t\t}\r\n\r\n\t\tvar posX = this.pages[x][y].x,\r\n\t\t\tposY = this.pages[x][y].y;\r\n\r\n\t\ttime = time === undefined ? this.options.snapSpeed || Math.max(\r\n\t\t\tMath.max(\r\n\t\t\t\tMath.min(Math.abs(posX - this.x), 1000),\r\n\t\t\t\tMath.min(Math.abs(posY - this.y), 1000)\r\n\t\t\t), 300) : time;\r\n\r\n\t\tthis.currentPage = {\r\n\t\t\tx: posX,\r\n\t\t\ty: posY,\r\n\t\t\tpageX: x,\r\n\t\t\tpageY: y\r\n\t\t};\r\n\r\n\t\tthis.scrollTo(posX, posY, time, easing);\r\n\t},\r\n\r\n\tnext: function (time, easing) {\r\n\t\tvar x = this.currentPage.pageX,\r\n\t\t\ty = this.currentPage.pageY;\r\n\r\n\t\tx++;\r\n\r\n\t\tif ( x >= this.pages.length && this.hasVerticalScroll ) {\r\n\t\t\tx = 0;\r\n\t\t\ty++;\r\n\t\t}\r\n\r\n\t\tthis.goToPage(x, y, time, easing);\r\n\t},\r\n\r\n\tprev: function (time, easing) {\r\n\t\tvar x = this.currentPage.pageX,\r\n\t\t\ty = this.currentPage.pageY;\r\n\r\n\t\tx--;\r\n\r\n\t\tif ( x < 0 && this.hasVerticalScroll ) {\r\n\t\t\tx = 0;\r\n\t\t\ty--;\r\n\t\t}\r\n\r\n\t\tthis.goToPage(x, y, time, easing);\r\n\t},\r\n\r\n\t_initKeys: function (e) {\r\n\t\t// default key bindings\r\n\t\tvar keys = {\r\n\t\t\tpageUp: 33,\r\n\t\t\tpageDown: 34,\r\n\t\t\tend: 35,\r\n\t\t\thome: 36,\r\n\t\t\tleft: 37,\r\n\t\t\tup: 38,\r\n\t\t\tright: 39,\r\n\t\t\tdown: 40\r\n\t\t};\r\n\t\tvar i;\r\n\r\n\t\t// if you give me characters I give you keycode\r\n\t\tif ( typeof this.options.keyBindings == 'object' ) {\r\n\t\t\tfor ( i in this.options.keyBindings ) {\r\n\t\t\t\tif ( typeof this.options.keyBindings[i] == 'string' ) {\r\n\t\t\t\t\tthis.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.options.keyBindings = {};\r\n\t\t}\r\n\r\n\t\tfor ( i in keys ) {\r\n\t\t\tthis.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];\r\n\t\t}\r\n\r\n\t\tutils.addEvent(window, 'keydown', this);\r\n\r\n\t\tthis.on('destroy', function () {\r\n\t\t\tutils.removeEvent(window, 'keydown', this);\r\n\t\t});\r\n\t},\r\n\r\n\t_key: function (e) {\r\n\t\tif ( !this.enabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar snap = this.options.snap,\t// we are using this alot, better to cache it\r\n\t\t\tnewX = snap ? this.currentPage.pageX : this.x,\r\n\t\t\tnewY = snap ? this.currentPage.pageY : this.y,\r\n\t\t\tnow = utils.getTime(),\r\n\t\t\tprevTime = this.keyTime || 0,\r\n\t\t\tacceleration = 0.250,\r\n\t\t\tpos;\r\n\r\n\t\tif ( this.options.useTransition && this.isInTransition ) {\r\n\t\t\tpos = this.getComputedPosition();\r\n\r\n\t\t\tthis._translate(Math.round(pos.x), Math.round(pos.y));\r\n\t\t\tthis.isInTransition = false;\r\n\t\t}\r\n\r\n\t\tthis.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;\r\n\r\n\t\tswitch ( e.keyCode ) {\r\n\t\t\tcase this.options.keyBindings.pageUp:\r\n\t\t\t\tif ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\r\n\t\t\t\t\tnewX += snap ? 1 : this.wrapperWidth;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewY += snap ? 1 : this.wrapperHeight;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.pageDown:\r\n\t\t\t\tif ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\r\n\t\t\t\t\tnewX -= snap ? 1 : this.wrapperWidth;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewY -= snap ? 1 : this.wrapperHeight;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.end:\r\n\t\t\t\tnewX = snap ? this.pages.length-1 : this.maxScrollX;\r\n\t\t\t\tnewY = snap ? this.pages[0].length-1 : this.maxScrollY;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.home:\r\n\t\t\t\tnewX = 0;\r\n\t\t\t\tnewY = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.left:\r\n\t\t\t\tnewX += snap ? -1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.up:\r\n\t\t\t\tnewY += snap ? 1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.right:\r\n\t\t\t\tnewX -= snap ? -1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.down:\r\n\t\t\t\tnewY -= snap ? 1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( snap ) {\r\n\t\t\tthis.goToPage(newX, newY);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( newX > 0 ) {\r\n\t\t\tnewX = 0;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t} else if ( newX < this.maxScrollX ) {\r\n\t\t\tnewX = this.maxScrollX;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t}\r\n\r\n\t\tif ( newY > 0 ) {\r\n\t\t\tnewY = 0;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t} else if ( newY < this.maxScrollY ) {\r\n\t\t\tnewY = this.maxScrollY;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(newX, newY, 0);\r\n\r\n\t\tthis.keyTime = now;\r\n\t},\r\n\r\n\t_animate: function (destX, destY, duration, easingFn) {\r\n\t\tvar that = this,\r\n\t\t\tstartX = this.x,\r\n\t\t\tstartY = this.y,\r\n\t\t\tstartTime = utils.getTime(),\r\n\t\t\tdestTime = startTime + duration;\r\n\r\n\t\tfunction step () {\r\n\t\t\tvar now = utils.getTime(),\r\n\t\t\t\tnewX, newY,\r\n\t\t\t\teasing;\r\n\r\n\t\t\tif ( now >= destTime ) {\r\n\t\t\t\tthat.isAnimating = false;\r\n\t\t\t\tthat._translate(destX, destY);\r\n\t\t\t\t\r\n\t\t\t\tif ( !that.resetPosition(that.options.bounceTime) ) {\r\n\t\t\t\t\tthat._execEvent('scrollEnd');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tnow = ( now - startTime ) / duration;\r\n\t\t\teasing = easingFn(now);\r\n\t\t\tnewX = ( destX - startX ) * easing + startX;\r\n\t\t\tnewY = ( destY - startY ) * easing + startY;\r\n\t\t\tthat._translate(newX, newY);\r\n\r\n\t\t\tif ( that.isAnimating ) {\r\n\t\t\t\trAF(step);\r\n\t\t\t}\r\n\r\n\t\t\tif ( that.options.probeType == 3 ) {\r\n\t\t\t\tthat._execEvent('scroll');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.isAnimating = true;\r\n\t\tstep();\r\n\t},\r\n\r\n\thandleEvent: function (e) {\r\n\t\tswitch ( e.type ) {\r\n\t\t\tcase 'touchstart':\r\n\t\t\tcase 'pointerdown':\r\n\t\t\tcase 'MSPointerDown':\r\n\t\t\tcase 'mousedown':\r\n\t\t\t\tthis._start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchmove':\r\n\t\t\tcase 'pointermove':\r\n\t\t\tcase 'MSPointerMove':\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tthis._move(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchend':\r\n\t\t\tcase 'pointerup':\r\n\t\t\tcase 'MSPointerUp':\r\n\t\t\tcase 'mouseup':\r\n\t\t\tcase 'touchcancel':\r\n\t\t\tcase 'pointercancel':\r\n\t\t\tcase 'MSPointerCancel':\r\n\t\t\tcase 'mousecancel':\r\n\t\t\t\tthis._end(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'orientationchange':\r\n\t\t\tcase 'resize':\r\n\t\t\t\tthis._resize();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'transitionend':\r\n\t\t\tcase 'webkitTransitionEnd':\r\n\t\t\tcase 'oTransitionEnd':\r\n\t\t\tcase 'MSTransitionEnd':\r\n\t\t\t\tthis._transitionEnd(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'wheel':\r\n\t\t\tcase 'DOMMouseScroll':\r\n\t\t\tcase 'mousewheel':\r\n\t\t\t\tthis._wheel(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'keydown':\r\n\t\t\t\tthis._key(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'click':\r\n\t\t\t\tif ( !e._constructed ) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\nfunction createDefaultScrollbar (direction, interactive, type) {\r\n\tvar scrollbar = document.createElement('div'),\r\n\t\tindicator = document.createElement('div');\r\n\r\n\tif ( type === true ) {\r\n\t\tscrollbar.style.cssText = 'position:absolute;z-index:9999';\r\n\t\tindicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';\r\n\t}\r\n\r\n\tindicator.className = 'iScrollIndicator';\r\n\r\n\tif ( direction == 'h' ) {\r\n\t\tif ( type === true ) {\r\n\t\t\tscrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\r\n\t\t\tindicator.style.height = '100%';\r\n\t\t}\r\n\t\tscrollbar.className = 'iScrollHorizontalScrollbar';\r\n\t} else {\r\n\t\tif ( type === true ) {\r\n\t\t\tscrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\r\n\t\t\tindicator.style.width = '100%';\r\n\t\t}\r\n\t\tscrollbar.className = 'iScrollVerticalScrollbar';\r\n\t}\r\n\r\n\tscrollbar.style.cssText += ';overflow:hidden';\r\n\r\n\tif ( !interactive ) {\r\n\t\tscrollbar.style.pointerEvents = 'none';\r\n\t}\r\n\r\n\tscrollbar.appendChild(indicator);\r\n\r\n\treturn scrollbar;\r\n}\r\n\r\nfunction Indicator (scroller, options) {\r\n\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\r\n\tthis.wrapperStyle = this.wrapper.style;\r\n\tthis.indicator = this.wrapper.children[0];\r\n\tthis.indicatorStyle = this.indicator.style;\r\n\tthis.scroller = scroller;\r\n\r\n\tthis.options = {\r\n\t\tlistenX: true,\r\n\t\tlistenY: true,\r\n\t\tinteractive: false,\r\n\t\tresize: true,\r\n\t\tdefaultScrollbars: false,\r\n\t\tshrink: false,\r\n\t\tfade: false,\r\n\t\tspeedRatioX: 0,\r\n\t\tspeedRatioY: 0\r\n\t};\r\n\r\n\tfor ( var i in options ) {\r\n\t\tthis.options[i] = options[i];\r\n\t}\r\n\r\n\tthis.sizeRatioX = 1;\r\n\tthis.sizeRatioY = 1;\r\n\tthis.maxPosX = 0;\r\n\tthis.maxPosY = 0;\r\n\r\n\tif ( this.options.interactive ) {\r\n\t\tif ( !this.options.disableTouch ) {\r\n\t\t\tutils.addEvent(this.indicator, 'touchstart', this);\r\n\t\t\tutils.addEvent(window, 'touchend', this);\r\n\t\t}\r\n\t\tif ( !this.options.disablePointer ) {\r\n\t\t\tutils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\r\n\t\t\tutils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);\r\n\t\t}\r\n\t\tif ( !this.options.disableMouse ) {\r\n\t\t\tutils.addEvent(this.indicator, 'mousedown', this);\r\n\t\t\tutils.addEvent(window, 'mouseup', this);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( this.options.fade ) {\r\n\t\tthis.wrapperStyle[utils.style.transform] = this.scroller.translateZ;\r\n\t\tthis.wrapperStyle[utils.style.transitionDuration] = utils.isBadAndroid ? '0.001s' : '0ms';\r\n\t\tthis.wrapperStyle.opacity = '0';\r\n\t}\r\n}\r\n\r\nIndicator.prototype = {\r\n\thandleEvent: function (e) {\r\n\t\tswitch ( e.type ) {\r\n\t\t\tcase 'touchstart':\r\n\t\t\tcase 'pointerdown':\r\n\t\t\tcase 'MSPointerDown':\r\n\t\t\tcase 'mousedown':\r\n\t\t\t\tthis._start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchmove':\r\n\t\t\tcase 'pointermove':\r\n\t\t\tcase 'MSPointerMove':\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tthis._move(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchend':\r\n\t\t\tcase 'pointerup':\r\n\t\t\tcase 'MSPointerUp':\r\n\t\t\tcase 'mouseup':\r\n\t\t\tcase 'touchcancel':\r\n\t\t\tcase 'pointercancel':\r\n\t\t\tcase 'MSPointerCancel':\r\n\t\t\tcase 'mousecancel':\r\n\t\t\t\tthis._end(e);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\tif ( this.options.interactive ) {\r\n\t\t\tutils.removeEvent(this.indicator, 'touchstart', this);\r\n\t\t\tutils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\r\n\t\t\tutils.removeEvent(this.indicator, 'mousedown', this);\r\n\r\n\t\t\tutils.removeEvent(window, 'touchmove', this);\r\n\t\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\r\n\t\t\tutils.removeEvent(window, 'mousemove', this);\r\n\r\n\t\t\tutils.removeEvent(window, 'touchend', this);\r\n\t\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);\r\n\t\t\tutils.removeEvent(window, 'mouseup', this);\r\n\t\t}\r\n\r\n\t\tif ( this.options.defaultScrollbars ) {\r\n\t\t\tthis.wrapper.parentNode.removeChild(this.wrapper);\r\n\t\t}\r\n\t},\r\n\r\n\t_start: function (e) {\r\n\t\tvar point = e.touches ? e.touches[0] : e;\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\tthis.transitionTime();\r\n\r\n\t\tthis.initiated = true;\r\n\t\tthis.moved = false;\r\n\t\tthis.lastPointX\t= point.pageX;\r\n\t\tthis.lastPointY\t= point.pageY;\r\n\r\n\t\tthis.startTime\t= utils.getTime();\r\n\r\n\t\tif ( !this.options.disableTouch ) {\r\n\t\t\tutils.addEvent(window, 'touchmove', this);\r\n\t\t}\r\n\t\tif ( !this.options.disablePointer ) {\r\n\t\t\tutils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);\r\n\t\t}\r\n\t\tif ( !this.options.disableMouse ) {\r\n\t\t\tutils.addEvent(window, 'mousemove', this);\r\n\t\t}\r\n\r\n\t\tthis.scroller._execEvent('beforeScrollStart');\r\n\t},\r\n\r\n\t_move: function (e) {\r\n\t\tvar point = e.touches ? e.touches[0] : e,\r\n\t\t\tdeltaX, deltaY,\r\n\t\t\tnewX, newY,\r\n\t\t\ttimestamp = utils.getTime();\r\n\r\n\t\tif ( !this.moved ) {\r\n\t\t\tthis.scroller._execEvent('scrollStart');\r\n\t\t}\r\n\r\n\t\tthis.moved = true;\r\n\r\n\t\tdeltaX = point.pageX - this.lastPointX;\r\n\t\tthis.lastPointX = point.pageX;\r\n\r\n\t\tdeltaY = point.pageY - this.lastPointY;\r\n\t\tthis.lastPointY = point.pageY;\r\n\r\n\t\tnewX = this.x + deltaX;\r\n\t\tnewY = this.y + deltaY;\r\n\r\n\t\tthis._pos(newX, newY);\r\n\r\n\r\n\t\tif ( this.scroller.options.probeType == 1 && timestamp - this.startTime > 300 ) {\r\n\t\t\tthis.startTime = timestamp;\r\n\t\t\tthis.scroller._execEvent('scroll');\r\n\t\t} else if ( this.scroller.options.probeType > 1 ) {\r\n\t\t\tthis.scroller._execEvent('scroll');\r\n\t\t}\r\n\r\n\r\n// INSERT POINT: indicator._move\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t},\r\n\r\n\t_end: function (e) {\r\n\t\tif ( !this.initiated ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.initiated = false;\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\tutils.removeEvent(window, 'touchmove', this);\r\n\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\r\n\t\tutils.removeEvent(window, 'mousemove', this);\r\n\r\n\t\tif ( this.scroller.options.snap ) {\r\n\t\t\tvar snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\r\n\r\n\t\t\tvar time = this.options.snapSpeed || Math.max(\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\tMath.min(Math.abs(this.scroller.x - snap.x), 1000),\r\n\t\t\t\t\t\tMath.min(Math.abs(this.scroller.y - snap.y), 1000)\r\n\t\t\t\t\t), 300);\r\n\r\n\t\t\tif ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {\r\n\t\t\t\tthis.scroller.directionX = 0;\r\n\t\t\t\tthis.scroller.directionY = 0;\r\n\t\t\t\tthis.scroller.currentPage = snap;\r\n\t\t\t\tthis.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.moved ) {\r\n\t\t\tthis.scroller._execEvent('scrollEnd');\r\n\t\t}\r\n\t},\r\n\r\n\ttransitionTime: function (time) {\r\n\t\ttime = time || 0;\r\n\t\tthis.indicatorStyle[utils.style.transitionDuration] = time + 'ms';\r\n\r\n\t\tif ( !time && utils.isBadAndroid ) {\r\n\t\t\tthis.indicatorStyle[utils.style.transitionDuration] = '0.001s';\r\n\t\t}\r\n\t},\r\n\r\n\ttransitionTimingFunction: function (easing) {\r\n\t\tthis.indicatorStyle[utils.style.transitionTimingFunction] = easing;\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tthis.transitionTime();\r\n\r\n\t\tif ( this.options.listenX && !this.options.listenY ) {\r\n\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\r\n\t\t} else if ( this.options.listenY && !this.options.listenX ) {\r\n\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\r\n\t\t} else {\r\n\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\r\n\t\t}\r\n\r\n\t\tif ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {\r\n\t\t\tutils.addClass(this.wrapper, 'iScrollBothScrollbars');\r\n\t\t\tutils.removeClass(this.wrapper, 'iScrollLoneScrollbar');\r\n\r\n\t\t\tif ( this.options.defaultScrollbars && this.options.customStyle ) {\r\n\t\t\t\tif ( this.options.listenX ) {\r\n\t\t\t\t\tthis.wrapper.style.right = '8px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.wrapper.style.bottom = '8px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tutils.removeClass(this.wrapper, 'iScrollBothScrollbars');\r\n\t\t\tutils.addClass(this.wrapper, 'iScrollLoneScrollbar');\r\n\r\n\t\t\tif ( this.options.defaultScrollbars && this.options.customStyle ) {\r\n\t\t\t\tif ( this.options.listenX ) {\r\n\t\t\t\t\tthis.wrapper.style.right = '2px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.wrapper.style.bottom = '2px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar r = this.wrapper.offsetHeight;\t// force refresh\r\n\r\n\t\tif ( this.options.listenX ) {\r\n\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\r\n\t\t\tif ( this.options.resize ) {\r\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\r\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tthis.indicatorWidth = this.indicator.clientWidth;\r\n\t\t\t}\r\n\r\n\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\r\n\r\n\t\t\tif ( this.options.shrink == 'clip' ) {\r\n\t\t\t\tthis.minBoundaryX = -this.indicatorWidth + 8;\r\n\t\t\t\tthis.maxBoundaryX = this.wrapperWidth - 8;\r\n\t\t\t} else {\r\n\t\t\t\tthis.minBoundaryX = 0;\r\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\r\n\t\t\t}\r\n\r\n\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\t\r\n\t\t}\r\n\r\n\t\tif ( this.options.listenY ) {\r\n\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\r\n\t\t\tif ( this.options.resize ) {\r\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\r\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tthis.indicatorHeight = this.indicator.clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\r\n\r\n\t\t\tif ( this.options.shrink == 'clip' ) {\r\n\t\t\t\tthis.minBoundaryY = -this.indicatorHeight + 8;\r\n\t\t\t\tthis.maxBoundaryY = this.wrapperHeight - 8;\r\n\t\t\t} else {\r\n\t\t\t\tthis.minBoundaryY = 0;\r\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\r\n\t\t\t}\r\n\r\n\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\r\n\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\r\n\t\t}\r\n\r\n\t\tthis.updatePosition();\r\n\t},\r\n\r\n\tupdatePosition: function () {\r\n\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\r\n\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\r\n\r\n\t\tif ( !this.options.ignoreBoundaries ) {\r\n\t\t\tif ( x < this.minBoundaryX ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\r\n\t\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tx = this.minBoundaryX;\r\n\t\t\t} else if ( x > this.maxBoundaryX ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\r\n\t\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tx = this.maxBoundaryX;\r\n\t\t\t\t}\r\n\t\t\t} else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {\r\n\t\t\t\tthis.width = this.indicatorWidth;\r\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t}\r\n\r\n\t\t\tif ( y < this.minBoundaryY ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\r\n\t\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t\t}\r\n\t\t\t\ty = this.minBoundaryY;\r\n\t\t\t} else if ( y > this.maxBoundaryY ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\r\n\t\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ty = this.maxBoundaryY;\r\n\t\t\t\t}\r\n\t\t\t} else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {\r\n\t\t\t\tthis.height = this.indicatorHeight;\r\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\tif ( this.scroller.options.useTransform ) {\r\n\t\t\tthis.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;\r\n\t\t} else {\r\n\t\t\tthis.indicatorStyle.left = x + 'px';\r\n\t\t\tthis.indicatorStyle.top = y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\t_pos: function (x, y) {\r\n\t\tif ( x < 0 ) {\r\n\t\t\tx = 0;\r\n\t\t} else if ( x > this.maxPosX ) {\r\n\t\t\tx = this.maxPosX;\r\n\t\t}\r\n\r\n\t\tif ( y < 0 ) {\r\n\t\t\ty = 0;\r\n\t\t} else if ( y > this.maxPosY ) {\r\n\t\t\ty = this.maxPosY;\r\n\t\t}\r\n\r\n\t\tx = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;\r\n\t\ty = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;\r\n\r\n\t\tthis.scroller.scrollTo(x, y);\r\n\t},\r\n\r\n\tfade: function (val, hold) {\r\n\t\tif ( hold && !this.visible ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tclearTimeout(this.fadeTimeout);\r\n\t\tthis.fadeTimeout = null;\r\n\r\n\t\tvar time = val ? 250 : 500,\r\n\t\t\tdelay = val ? 0 : 300;\r\n\r\n\t\tval = val ? '1' : '0';\r\n\r\n\t\tthis.wrapperStyle[utils.style.transitionDuration] = time + 'ms';\r\n\r\n\t\tthis.fadeTimeout = setTimeout((function (val) {\r\n\t\t\tthis.wrapperStyle.opacity = val;\r\n\t\t\tthis.visible = +val;\r\n\t\t}).bind(this, val), delay);\r\n\t}\r\n};\r\n\r\nIScroll.utils = utils;\r\n\r\nif ( typeof module != 'undefined' && module.exports ) {\r\n\tmodule.exports = IScroll;\r\n} else {\r\n\twindow.IScroll = IScroll;\r\n}\r\n\r\n})(window, document, Math);"]}