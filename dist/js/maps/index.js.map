{"version":3,"sources":["index.js"],"names":["infor","$","ajax","type","url","http","dataType","ansyc","contentType","data","JSON","stringify","userNumber","success","console","log","gUserInfo","find","attr","headImg","html","name","win","lose","rank","dan","countGold","bean","div1Width","parseInt","width","integral","css","needIntegral","userId","GetRequest","location","search","theRequest","Object","indexOf","str","substr","strs","split","i","length","setupWebViewJavascriptBridge","callback","window","WebViewJavascriptBridge","WVJBCallbacks","push","WVJBIframe","document","createElement","style","display","src","documentElement","appendChild","setTimeout","removeChild","yun","getElementById","contentWindow","pause","musicServiceInterfaceName","startGridViewHttp","startPlay","play","setInterval","toggle","on","hide","show","goldCount","href","musicType","sessionStorage","setItem","getItem","oDiv","oT","oSpan","Date","prototype","format","date","M+","this","getMonth","d+","getDate","h+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S+","getMilliseconds","test","replace","RegExp","$1","getFullYear","k","nIsJie","sSetFristTime","sSetFristTimeStamp","parse","newDate","setTime","sTimeData","innerHTML","sThistimesTamp","getTime","sTimeDifference","ceil","sThisJie","jie","jieTime","Request","decodeURI","bridge","registerHandler","responseCallback","onclick","e","preventDefault","callHandler","response","imgbiao","musicClass"],"mappings":"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","file":"../index.js","sourcesContent":["/**\r\n * Created by Administrator on 2017/5/2.\r\n */\r\nvar userId = '';\r\nvar countGold;\r\n/*挑战*/\r\nsetInterval(function () {\r\n    $('.look').toggle()\r\n}, 500)\r\n/*关闭弹出层*/\r\n$('.close').on('click', function () {\r\n    $('.mask').hide();\r\n    $('.popup').hide();\r\n})\r\n\r\n\r\n/*我要练习*/\r\n$('.practice').on('click', function () {\r\n    $('.mask').show();\r\n    $('.popup').show();\r\n    /*$('.content').html(html)*/\r\n    $('.content').hide()\r\n    $('.beanBox').hide()\r\n    $('.pri_box').show()\r\n    $('.pra').show()\r\n    $('.beanBoxgold').hide()\t\r\n})\r\n/*点击金豆赛*/\r\n\r\n$('.gold').on('touchstart', function () {\r\n\tvar goldCount=$('.count').html();\r\n\tconsole.log(goldCount)\r\n\tif(goldCount<50){\r\n\t\t $('.mask').show();\r\n    $('.popup').show();\r\n    $('.content').hide()\r\n    $('.pri_box').hide()\r\n    $('.pra').hide();\r\n    $('.beanBox').show(); \r\n      $('.beanBoxgold').hide()\r\n  \r\n\t}else if(goldCount>=50){\r\n\t\t\r\n\t\t $('.mask').show();\r\n    $('.popup').show();\r\n    $('.beanBox').hide();\r\n\t\t$('.beanBoxgold').show()\t\t\t\r\n\t\t$('.beanBox').css('background','url(../image/bean_frame.png) no-repeat 0px 0px')\r\n\t\t// $('.beanBox').css('background','url(../image/frame_gray.png) no-repeat')\r\n\t}\r\n   \r\n    //$(this).children('.goldImg').attr('src','../image/gold1.png');\r\n})\r\n\r\n\r\n\r\n/*有豆的时候点击金豆赛*/\r\n$('.beanBoxgold').on('touchstart',function(){\r\n\tlocation.href=\"html/gold.html\"\r\n})\r\n/*点击开始练习*/\r\n$('.pri_box').on('touchstart', function () {\r\n    location.href = 'html/practice.html'\r\n})\r\n/*点击聊天室*/\r\n$('.qq').on('click', function () {\r\n    console.log(musicType)\r\n    location.href = 'html/talk.html'\r\n})\r\n/*k线王者榜*/\r\n$('.king').on('click', function () {\r\n    location.href = 'html/king.html'\r\n})\r\n$('.historyImg').on('touchstart', function () {\r\n\t//console.log(userId)\r\n    sessionStorage.setItem('userId', userId)\r\n    location.href = 'html/history.html'\r\n})\r\n\r\n/*获取用户信息*/\r\ninfor()\r\nfunction infor() {\r\n    $.ajax({\r\n        type: \"post\",\r\n        url: http + \"gUserInfo/getUserInfoById\",\r\n        dataType: \"json\",\r\n        ansyc: false,\r\n        contentType: \"application/json;charset=utf-8\",\r\n        data: JSON.stringify({\r\n            \"userNumber\": userNumber\r\n        }),\r\n        success: function (data) {\r\n            console.log(data)\r\n            var gUserInfo = data.gUserInfo;\r\n            $('.headImg').find('img').attr('src', gUserInfo.headImg);\r\n            $('.nickName').html(gUserInfo.name)\r\n            $('.winCount').html(gUserInfo.win);\r\n            $('.loseCount').html(gUserInfo.lose);\r\n            $('.rankCount').html(gUserInfo.rank);\r\n            $('.winName').html(gUserInfo.dan)\r\n            countGold=gUserInfo.bean\r\n            $('.count').html(countGold)\r\n            var div1Width = parseInt($('.progress').width() * gUserInfo.integral / 100);\r\n            console.log(div1Width)\r\n            $('.div1').css('width', div1Width);\r\n            $('.integral').html(gUserInfo.integral);\r\n            $('.needIntegral').html(gUserInfo.needIntegral);\r\n            if (gUserInfo.dan == \"菜鸟\") {\r\n                $('.winImg').attr('src', 'image/shield.png')\r\n            } else if (gUserInfo.dan == \"小白\") {\r\n                $('.winImg').attr('src', 'image/ic_kline_flag_level_2.png')\r\n            } else if (gUserInfo.dan == \"精英\") {\r\n                $('.winImg').attr('src', 'image/ic_kline_flag_level_3.png')\r\n            } else if (gUserInfo.dan == \"大师\") {\r\n                $('.winImg').attr('src', 'image/ic_kline_flag_level_4.png')\r\n            } else if (gUserInfo.dan == \"大将\") {\r\n                $('.winImg').attr('src', 'image/ic_kline_flag_level_5.png')\r\n            } else if (gUserInfo.dan == \"王者\") {\r\n                $('.winImg').attr('src', 'image/ic_kline_flag_level_6.png')\r\n            }\r\n            userId = gUserInfo.userId;\r\n            console.log(userId)\r\n        }\r\n    })\r\n}\r\n$('.ranked').on('click', function () {\r\n    location.href = \"html/start.html\"\r\n})\r\n\r\n\r\n/*关闭弹出层*/\r\n$('.close').on('click', function () {\r\n    $('.maskIndex').hide();\r\n    $('.popupIndex').hide();\r\n    var a = 1;\r\n    sessionStorage.setItem('a', a)\r\n})\r\n\r\nif (sessionStorage.getItem('a') == 1) {\r\n    $('.maskIndex').hide();\r\n    $('.popupIndex').hide();\r\n}\r\n\r\n\r\n//时间届数\r\nvar oDiv = document.getElementById(\"h\")\r\nvar oT = document.getElementById(\"t\");\r\nvar oSpan = document.getElementById(\"jie\");\r\n\r\n\r\nDate.prototype.format = function (format) {\r\n    var date = {\r\n        \"M+\": this.getMonth() + 1,\r\n        \"d+\": this.getDate(),\r\n        \"h+\": this.getHours(),\r\n        \"m+\": this.getMinutes(),\r\n        \"s+\": this.getSeconds(),\r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3),\r\n        \"S+\": this.getMilliseconds()\r\n    };\r\n    if (/(y+)/i.test(format)) {\r\n        format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n    }\r\n    for (var k in date) {\r\n        if (new RegExp(\"(\" + k + \")\").test(format)) {\r\n            format = format.replace(RegExp.$1, RegExp.$1.length == 1\r\n                ? date[k] : (\"00\" + date[k]).substr((\"\" + date[k]).length));\r\n        }\r\n    }\r\n    return format;\r\n}\r\nvar nIsJie = 1;\r\n//设置第一届第一天时间\r\nvar sSetFristTime = \"2017-05-07 00:00:00\";\r\n//转换为时间戳\t\r\n//var sSetFristTimeStamp = Date.parse(new Date(sSetFristTime));\r\nvar sSetFristTimeStamp = Date.parse(new Date(sSetFristTime.replace(/-/g,\"/\")));\r\n//timestamp2 = timestamp2 / 1000;\r\n//2014-07-10 10:21:12的时间戳为：1404958872 \r\n//console.log(sSetFristTime + \"的时间戳为：\" + sSetFristTimeStamp);\r\n\r\nvar newDate = new Date();\r\n//初始化时间\r\nnewDate.setTime(sSetFristTimeStamp);\r\n//调用 Date.prototype.format函数，将时间转换为自己需要的格式\r\nvar sTimeData = newDate.format('yyyy-MM-dd hh:mm:ss');\r\n//这是第一届第一天，我打印在元素H2中了，格式你自己定\r\noT.innerHTML = sTimeData\r\n//初始化时间\r\nnewDate.setTime(sSetFristTimeStamp + 604799000);//其中604799000是七天的毫秒级时间\r\nvar sTimeData = newDate.format('yyyy-MM-dd hh:mm:ss')\r\noDiv.innerHTML = sTimeData\r\n\r\n//获取当前时间\r\nvar sThistimesTamp = new Date().getTime();\r\nconsole.log(sThistimesTamp)\r\n//当前时间减去第一期，第一届时间\r\nvar sTimeDifference = sThistimesTamp - sSetFristTimeStamp\r\nconsole.log(sTimeDifference)\r\nif (sTimeDifference / 604799000 < 1) {\r\n//如果时间小于七天，显示第一届\r\n    console.log(nIsJie)\r\n    oSpan.innerHTML = nIsJie\r\n    //第一届，起止时间不变\r\n} else {\r\n//如果时间大于七天，第几届向上取整是届数\r\n    console.log(Math.ceil(sTimeDifference / 604799000))\r\n    var sThisJie = Math.ceil(sTimeDifference / 604799000)\r\n//届数确定后，看是确定本届时间间隔\r\n//初始化本届开始时间\r\n\r\n    newDate.setTime(sSetFristTimeStamp + 604800000 * (sThisJie - 1));\r\n    var sTimeData = newDate.format('yyyy-MM-dd hh:mm:ss')\r\n    oT.innerHTML = sTimeData\r\n\r\n//初始化本届结束时间\r\n    newDate.setTime(sSetFristTimeStamp + 604800000 * (sThisJie - 1) + 604799000);\r\n    var sTimeData = newDate.format('yyyy-MM-dd hh:mm:ss')\r\n    oDiv.innerHTML = sTimeData\r\n\r\n//显示当前届数\r\n    oSpan.innerHTML = sThisJie\r\n}\r\n\r\nvar jie = $('#jie').html();\r\nconsole.log(jie)\r\nsessionStorage.setItem('jie', jie);\r\nvar jieTime = $('#time').html();\r\nsessionStorage.setItem('jieTime', jieTime);\r\n\r\n\r\nfunction GetRequest() {\r\n    var url = location.search; //获取url中\"?\"符后的字串\r\n    var theRequest = new Object();\r\n    if (url.indexOf(\"?\") != -1) {\r\n        var str = url.substr(1);\r\n        strs = str.split(\"&\");\r\n        for (var i = 0; i < strs.length; i++) {\r\n            theRequest[strs[i].split(\"=\")[0]] = (strs[i].split(\"=\")[1]);\r\n        }\r\n    }\r\n    return theRequest;\r\n}\r\nvar Request = new Object();\r\nRequest = GetRequest();\r\nvar userNumber = decodeURI(Request[\"userNumber\"]);//以什么分割\r\nif(userNumber=='undefined'){\r\n\tuserNumber=sessionStorage.getItem('userNumber')\r\n}else{\r\n\tsessionStorage.setItem('userNumber', userNumber);\r\n}\r\n\r\n\r\n\r\nfunction setupWebViewJavascriptBridge(callback) {\r\n    if (window.WebViewJavascriptBridge) {\r\n        return callback(WebViewJavascriptBridge);\r\n    }\r\n    if (window.WVJBCallbacks) {\r\n        return window.WVJBCallbacks.push(callback);\r\n    }\r\n    window.WVJBCallbacks = [callback];\r\n    var WVJBIframe = document.createElement('iframe');\r\n    WVJBIframe.style.display = 'none';\r\n    WVJBIframe.src = 'https://__bridge_loaded__';\r\n    document.documentElement.appendChild(WVJBIframe);\r\n    setTimeout(function () {\r\n        document.documentElement.removeChild(WVJBIframe)\r\n    }, 0)\r\n}\r\n\r\nsetupWebViewJavascriptBridge(function (bridge) {\r\n    var uniqueId = 1;\r\n\r\n    bridge.registerHandler('testJavascriptHandler', function (data, responseCallback) {\r\n\r\n    });\r\n\r\n    var callbackButton = document.getElementById('goback');\r\n\r\n    callbackButton.onclick = function (e) {\r\n        e.preventDefault();\r\n\r\n        bridge.callHandler('testObjcCallback1', function (response) {\r\n\r\n        });\r\n    }\r\n});\r\n\r\nfunction yun(){\r\n\tvar musicImg=document.getElementById('iframe').contentWindow.document.getElementById('audio');\r\n\tmusicImg.pause();\r\n    window.musicServiceInterfaceName.startGridViewHttp();\r\n}\r\n\r\nvar imgbiao=sessionStorage.getItem('aa');\r\nvar musicClass=document.getElementById('musicBg');\r\n\r\n\r\n\r\n\r\nfunction startPlay(){\r\n\tvar musicImg=document.getElementById('iframe').contentWindow.document.getElementById('audio');\r\n\tmusicImg.play();\r\n}\r\n"]}