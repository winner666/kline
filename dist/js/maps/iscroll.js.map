{"version":3,"sources":["iscroll.js"],"names":["window","doc","prefixStyle","style","vendor","charAt","toUpperCase","substr","m","Math","dummyStyle","createElement","vendors","split","i","l","length","cssVendor","toLowerCase","transform","transitionProperty","transitionDuration","transformOrigin","transitionTimingFunction","transitionDelay","isAndroid","test","navigator","appVersion","isIDevice","isTouchPad","has3d","hasTouch","hasTransform","hasTransitionEnd","RESIZE_EV","START_EV","MOVE_EV","END_EV","CANCEL_EV","TRNEND_EV","","webkit","Moz","O","ms","nextFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","cancelFrame","cancelRequestAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","translateZ","iScroll","el","options","that","this","wrapper","getElementById","overflow","scroller","children","hScroll","vScroll","x","y","bounce","bounceLock","momentum","lockDirection","useTransform","useTransition","topOffset","checkDOMChanges","handleClick","hScrollbar","vScrollbar","fixedScrollbar","hideScrollbar","fadeScrollbar","scrollbarClass","zoom","zoomMin","zoomMax","doubleTapZoom","wheelAction","snap","snapThreshold","onRefresh","onBeforeScrollStart","e","preventDefault","onScrollStart","onBeforeScrollMove","onScrollMove","onBeforeScrollEnd","onScrollEnd","onTouchEnd","onDestroy","onZoomStart","onZoom","onZoomEnd","cssText","refresh","_bind","checkDOMTime","setInterval","_checkDOMChanges","prototype","enabled","steps","scale","currPageX","currPageY","pagesX","pagesY","aniTime","wheelZoomCount","handleEvent","type","button","_start","_move","_end","_resize","_wheel","_transitionEnd","moved","zoomed","animating","scrollerW","offsetWidth","scrollerH","offsetHeight","_scrollbar","dir","bar","className","appendChild","hScrollbarSize","hScrollbarWrapper","clientWidth","hScrollbarIndicatorSize","max","round","hScrollbarIndicator","width","hScrollbarMaxScroll","hScrollbarProp","maxScrollX","vScrollbarSize","vScrollbarWrapper","clientHeight","vScrollbarIndicatorSize","vScrollbarIndicator","height","vScrollbarMaxScroll","vScrollbarProp","maxScrollY","_scrollbarPos","parentNode","removeChild","_pos","left","top","hidden","size","pos","opacity","matrix","c1","c2","point","touches","call","_transitionTime","distX","distY","absDistX","absDistY","dirX","dirY","abs","pageX","pageY","touchesDistStart","sqrt","originX","wrapperOffsetLeft","originY","wrapperOffsetTop","getComputedStyle","replace","_unbind","absStartX","absStartY","startX","startY","pointX","pointY","startTime","timeStamp","Date","now","deltaX","deltaY","newX","newY","timestamp","touchesDist","pow","lastScale","minScrollY","target","ev","newDuration","changedTouches","momentumX","dist","time","momentumY","duration","newPosX","newPosY","min","doubleTapTimer","nodeType","tagName","createEvent","initMouseEvent","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","_fake","dispatchEvent","_resetPos","_momentum","wrapperW","wrapperH","scrollTo","_snap","resetX","resetY","wheelDeltaX","wheelDeltaY","deltaScale","wheelDelta","detail","_startAni","step","easeOut","animate","shift","onAnimationEnd","maxDistUpper","maxDistLower","speed","newDist","newTime","_offset","offsetLeft","offsetTop","offsetParent","page","sizeX","sizeY","bubble","addEventListener","removeEventListener","destroy","clearInterval","offset","els","querySelectorAll","relative","stop","push","scrollToElement","querySelector","undefined","scrollToPage","disable","enable","relScale","isReady","exports","document"],"mappings":"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","file":"../iscroll.js","sourcesContent":["/*!\n * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org\n * Released under MIT license, http://cubiq.org/license\n */\n(function(window, doc){\nvar m = Math,\n\tdummyStyle = doc.createElement('div').style,\n\tvendor = (function () {\n\t\tvar vendors = 't,webkitT,MozT,msT,OT'.split(','),\n\t\t\tt,\n\t\t\ti = 0,\n\t\t\tl = vendors.length;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tt = vendors[i] + 'ransform';\n\t\t\tif ( t in dummyStyle ) {\n\t\t\t\treturn vendors[i].substr(0, vendors[i].length - 1);\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})(),\n\tcssVendor = vendor ? '-' + vendor.toLowerCase() + '-' : '',\n\n\t// Style properties\n\ttransform = prefixStyle('transform'),\n\ttransitionProperty = prefixStyle('transitionProperty'),\n\ttransitionDuration = prefixStyle('transitionDuration'),\n\ttransformOrigin = prefixStyle('transformOrigin'),\n\ttransitionTimingFunction = prefixStyle('transitionTimingFunction'),\n\ttransitionDelay = prefixStyle('transitionDelay'),\n\n    // Browser capabilities\n\tisAndroid = (/android/gi).test(navigator.appVersion),\n\tisIDevice = (/iphone|ipad/gi).test(navigator.appVersion),\n\tisTouchPad = (/hp-tablet/gi).test(navigator.appVersion),\n\n    has3d = prefixStyle('perspective') in dummyStyle,\n    hasTouch = 'ontouchstart' in window && !isTouchPad,\n    hasTransform = vendor !== false,\n    hasTransitionEnd = prefixStyle('transition') in dummyStyle,\n\n\tRESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',\n\tSTART_EV = hasTouch ? 'touchstart' : 'mousedown',\n\tMOVE_EV = hasTouch ? 'touchmove' : 'mousemove',\n\tEND_EV = hasTouch ? 'touchend' : 'mouseup',\n\tCANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',\n\tTRNEND_EV = (function () {\n\t\tif ( vendor === false ) return false;\n\n\t\tvar transitionEnd = {\n\t\t\t\t''\t\t\t: 'transitionend',\n\t\t\t\t'webkit'\t: 'webkitTransitionEnd',\n\t\t\t\t'Moz'\t\t: 'transitionend',\n\t\t\t\t'O'\t\t\t: 'otransitionend',\n\t\t\t\t'ms'\t\t: 'MSTransitionEnd'\n\t\t\t};\n\n\t\treturn transitionEnd[vendor];\n\t})(),\n\n\tnextFrame = (function() {\n\t\treturn window.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\tfunction(callback) { return setTimeout(callback, 1); };\n\t})(),\n\tcancelFrame = (function () {\n\t\treturn window.cancelRequestAnimationFrame ||\n\t\t\twindow.webkitCancelAnimationFrame ||\n\t\t\twindow.webkitCancelRequestAnimationFrame ||\n\t\t\twindow.mozCancelRequestAnimationFrame ||\n\t\t\twindow.oCancelRequestAnimationFrame ||\n\t\t\twindow.msCancelRequestAnimationFrame ||\n\t\t\tclearTimeout;\n\t})(),\n\n\t// Helpers\n\ttranslateZ = has3d ? ' translateZ(0)' : '',\n\n\t// Constructor\n\tiScroll = function (el, options) {\n\t\tvar that = this,\n\t\t\ti;\n\n\t\tthat.wrapper = typeof el == 'object' ? el : doc.getElementById(el);\n\t\tthat.wrapper.style.overflow = 'hidden';\n\t\tthat.scroller = that.wrapper.children[0];\n\n\t\t// Default options\n\t\tthat.options = {\n\t\t\thScroll: true,\n\t\t\tvScroll: true,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tbounce: true,\n\t\t\tbounceLock: false,\n\t\t\tmomentum: true,\n\t\t\tlockDirection: true,\n\t\t\tuseTransform: true,\n\t\t\tuseTransition: false,\n\t\t\ttopOffset: 0,\n\t\t\tcheckDOMChanges: false,\t\t// Experimental\n\t\t\thandleClick: true,\n\n\t\t\t// Scrollbar\n\t\t\thScrollbar: true,\n\t\t\tvScrollbar: true,\n\t\t\tfixedScrollbar: isAndroid,\n\t\t\thideScrollbar: isIDevice,\n\t\t\tfadeScrollbar: isIDevice && has3d,\n\t\t\tscrollbarClass: '',\n\n\t\t\t// Zoom\n\t\t\tzoom: false,\n\t\t\tzoomMin: 1,\n\t\t\tzoomMax: 4,\n\t\t\tdoubleTapZoom: 2,\n\t\t\twheelAction: 'scroll',\n\n\t\t\t// Snap\n\t\t\tsnap: false,\n\t\t\tsnapThreshold: 1,\n\n\t\t\t// Events\n\t\t\tonRefresh: null,\n\t\t\tonBeforeScrollStart: function (e) { e.preventDefault(); },\n\t\t\tonScrollStart: null,\n\t\t\tonBeforeScrollMove: null,\n\t\t\tonScrollMove: null,\n\t\t\tonBeforeScrollEnd: null,\n\t\t\tonScrollEnd: null,\n\t\t\tonTouchEnd: null,\n\t\t\tonDestroy: null,\n\t\t\tonZoomStart: null,\n\t\t\tonZoom: null,\n\t\t\tonZoomEnd: null\n\t\t};\n\n\t\t// User defined options\n\t\tfor (i in options) that.options[i] = options[i];\n\t\t\n\t\t// Set starting position\n\t\tthat.x = that.options.x;\n\t\tthat.y = that.options.y;\n\n\t\t// Normalize options\n\t\tthat.options.useTransform = hasTransform && that.options.useTransform;\n\t\tthat.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;\n\t\tthat.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;\n\t\tthat.options.zoom = that.options.useTransform && that.options.zoom;\n\t\tthat.options.useTransition = hasTransitionEnd && that.options.useTransition;\n\n\t\t// Helpers FIX ANDROID BUG!\n\t\t// translate3d and scale doesn't work together!\n\t\t// Ignoring 3d ONLY WHEN YOU SET that.options.zoom\n\t\tif ( that.options.zoom && isAndroid ){\n\t\t\ttranslateZ = '';\n\t\t}\n\t\t\n\t\t// Set some default styles\n\t\tthat.scroller.style[transitionProperty] = that.options.useTransform ? cssVendor + 'transform' : 'top left';\n\t\tthat.scroller.style[transitionDuration] = '0';\n\t\tthat.scroller.style[transformOrigin] = '0 0';\n\t\tif (that.options.useTransition) that.scroller.style[transitionTimingFunction] = 'cubic-bezier(0.33,0.66,0.66,1)';\n\t\t\n\t\tif (that.options.useTransform) that.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px)' + translateZ;\n\t\telse that.scroller.style.cssText += ';position:absolute;top:' + that.y + 'px;left:' + that.x + 'px';\n\n\t\tif (that.options.useTransition) that.options.fixedScrollbar = true;\n\n\t\tthat.refresh();\n\n\t\tthat._bind(RESIZE_EV, window);\n\t\tthat._bind(START_EV);\n\t\tif (!hasTouch) {\n\t\t\tif (that.options.wheelAction != 'none') {\n\t\t\t\tthat._bind('DOMMouseScroll');\n\t\t\t\tthat._bind('mousewheel');\n\t\t\t}\n\t\t}\n\n\t\tif (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {\n\t\t\tthat._checkDOMChanges();\n\t\t}, 500);\n\t};\n\n// Prototype\niScroll.prototype = {\n\tenabled: true,\n\tx: 0,\n\ty: 0,\n\tsteps: [],\n\tscale: 1,\n\tcurrPageX: 0, currPageY: 0,\n\tpagesX: [], pagesY: [],\n\taniTime: null,\n\twheelZoomCount: 0,\n\t\n\thandleEvent: function (e) {\n\t\tvar that = this;\n\t\tswitch(e.type) {\n\t\t\tcase START_EV:\n\t\t\t\tif (!hasTouch && e.button !== 0) return;\n\t\t\t\tthat._start(e);\n\t\t\t\tbreak;\n\t\t\tcase MOVE_EV: that._move(e); break;\n\t\t\tcase END_EV:\n\t\t\tcase CANCEL_EV: that._end(e); break;\n\t\t\tcase RESIZE_EV: that._resize(); break;\n\t\t\tcase 'DOMMouseScroll': case 'mousewheel': that._wheel(e); break;\n\t\t\tcase TRNEND_EV: that._transitionEnd(e); break;\n\t\t}\n\t},\n\t\n\t_checkDOMChanges: function () {\n\t\tif (this.moved || this.zoomed || this.animating ||\n\t\t\t(this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale)) return;\n\n\t\tthis.refresh();\n\t},\n\t\n\t_scrollbar: function (dir) {\n\t\tvar that = this,\n\t\t\tbar;\n\n\t\tif (!that[dir + 'Scrollbar']) {\n\t\t\tif (that[dir + 'ScrollbarWrapper']) {\n\t\t\t\tif (hasTransform) that[dir + 'ScrollbarIndicator'].style[transform] = '';\n\t\t\t\tthat[dir + 'ScrollbarWrapper'].parentNode.removeChild(that[dir + 'ScrollbarWrapper']);\n\t\t\t\tthat[dir + 'ScrollbarWrapper'] = null;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'] = null;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!that[dir + 'ScrollbarWrapper']) {\n\t\t\t// Create the scrollbar wrapper\n\t\t\tbar = doc.createElement('div');\n\n\t\t\tif (that.options.scrollbarClass) bar.className = that.options.scrollbarClass + dir.toUpperCase();\n\t\t\telse bar.style.cssText = 'position:absolute;z-index:100;' + (dir == 'h' ? 'height:7px;bottom:1px;left:2px;right:' + (that.vScrollbar ? '7' : '2') + 'px' : 'width:7px;bottom:' + (that.hScrollbar ? '7' : '2') + 'px;top:2px;right:1px');\n\n\t\t\tbar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:opacity;' + cssVendor + 'transition-duration:' + (that.options.fadeScrollbar ? '350ms' : '0') + ';overflow:hidden;opacity:' + (that.options.hideScrollbar ? '0' : '1');\n\n\t\t\tthat.wrapper.appendChild(bar);\n\t\t\tthat[dir + 'ScrollbarWrapper'] = bar;\n\n\t\t\t// Create the scrollbar indicator\n\t\t\tbar = doc.createElement('div');\n\t\t\tif (!that.options.scrollbarClass) {\n\t\t\t\tbar.style.cssText = 'position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);' + cssVendor + 'background-clip:padding-box;' + cssVendor + 'box-sizing:border-box;' + (dir == 'h' ? 'height:100%' : 'width:100%') + ';' + cssVendor + 'border-radius:3px;border-radius:3px';\n\t\t\t}\n\t\t\tbar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:' + cssVendor + 'transform;' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);' + cssVendor + 'transition-duration:0;' + cssVendor + 'transform: translate(0,0)' + translateZ;\n\t\t\tif (that.options.useTransition) bar.style.cssText += ';' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';\n\n\t\t\tthat[dir + 'ScrollbarWrapper'].appendChild(bar);\n\t\t\tthat[dir + 'ScrollbarIndicator'] = bar;\n\t\t}\n\n\t\tif (dir == 'h') {\n\t\t\tthat.hScrollbarSize = that.hScrollbarWrapper.clientWidth;\n\t\t\tthat.hScrollbarIndicatorSize = m.max(m.round(that.hScrollbarSize * that.hScrollbarSize / that.scrollerW), 8);\n\t\t\tthat.hScrollbarIndicator.style.width = that.hScrollbarIndicatorSize + 'px';\n\t\t\tthat.hScrollbarMaxScroll = that.hScrollbarSize - that.hScrollbarIndicatorSize;\n\t\t\tthat.hScrollbarProp = that.hScrollbarMaxScroll / that.maxScrollX;\n\t\t} else {\n\t\t\tthat.vScrollbarSize = that.vScrollbarWrapper.clientHeight;\n\t\t\tthat.vScrollbarIndicatorSize = m.max(m.round(that.vScrollbarSize * that.vScrollbarSize / that.scrollerH), 8);\n\t\t\tthat.vScrollbarIndicator.style.height = that.vScrollbarIndicatorSize + 'px';\n\t\t\tthat.vScrollbarMaxScroll = that.vScrollbarSize - that.vScrollbarIndicatorSize;\n\t\t\tthat.vScrollbarProp = that.vScrollbarMaxScroll / that.maxScrollY;\n\t\t}\n\n\t\t// Reset position\n\t\tthat._scrollbarPos(dir, true);\n\t},\n\t\n\t_resize: function () {\n\t\tvar that = this;\n\t\tsetTimeout(function () { that.refresh(); }, isAndroid ? 200 : 0);\n\t},\n\t\n\t_pos: function (x, y) {\n\t\tif (this.zoomed) return;\n\n\t\tx = this.hScroll ? x : 0;\n\t\ty = this.vScroll ? y : 0;\n\n\t\tif (this.options.useTransform) {\n\t\t\tthis.scroller.style[transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + this.scale + ')' + translateZ;\n\t\t} else {\n\t\t\tx = m.round(x);\n\t\t\ty = m.round(y);\n\t\t\tthis.scroller.style.left = x + 'px';\n\t\t\tthis.scroller.style.top = y + 'px';\n\t\t}\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis._scrollbarPos('h');\n\t\tthis._scrollbarPos('v');\n\t},\n\n\t_scrollbarPos: function (dir, hidden) {\n\t\tvar that = this,\n\t\t\tpos = dir == 'h' ? that.x : that.y,\n\t\t\tsize;\n\n\t\tif (!that[dir + 'Scrollbar']) return;\n\n\t\tpos = that[dir + 'ScrollbarProp'] * pos;\n\n\t\tif (pos < 0) {\n\t\t\tif (!that.options.fixedScrollbar) {\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] + m.round(pos * 3);\n\t\t\t\tif (size < 8) size = 8;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n\t\t\t}\n\t\t\tpos = 0;\n\t\t} else if (pos > that[dir + 'ScrollbarMaxScroll']) {\n\t\t\tif (!that.options.fixedScrollbar) {\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] - m.round((pos - that[dir + 'ScrollbarMaxScroll']) * 3);\n\t\t\t\tif (size < 8) size = 8;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'] + (that[dir + 'ScrollbarIndicatorSize'] - size);\n\t\t\t} else {\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'];\n\t\t\t}\n\t\t}\n\n\t\tthat[dir + 'ScrollbarWrapper'].style[transitionDelay] = '0';\n\t\tthat[dir + 'ScrollbarWrapper'].style.opacity = hidden && that.options.hideScrollbar ? '0' : '1';\n\t\tthat[dir + 'ScrollbarIndicator'].style[transform] = 'translate(' + (dir == 'h' ? pos + 'px,0)' : '0,' + pos + 'px)') + translateZ;\n\t},\n\t\n\t_start: function (e) {\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\n\t\t\tmatrix, x, y,\n\t\t\tc1, c2;\n\n\t\tif (!that.enabled) return;\n\n\t\tif (that.options.onBeforeScrollStart) that.options.onBeforeScrollStart.call(that, e);\n\n\t\tif (that.options.useTransition || that.options.zoom) that._transitionTime(0);\n\n\t\tthat.moved = false;\n\t\tthat.animating = false;\n\t\tthat.zoomed = false;\n\t\tthat.distX = 0;\n\t\tthat.distY = 0;\n\t\tthat.absDistX = 0;\n\t\tthat.absDistY = 0;\n\t\tthat.dirX = 0;\n\t\tthat.dirY = 0;\n\n\t\t// Gesture start\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\n\t\t\tc1 = m.abs(e.touches[0].pageX-e.touches[1].pageX);\n\t\t\tc2 = m.abs(e.touches[0].pageY-e.touches[1].pageY);\n\t\t\tthat.touchesDistStart = m.sqrt(c1 * c1 + c2 * c2);\n\n\t\t\tthat.originX = m.abs(e.touches[0].pageX + e.touches[1].pageX - that.wrapperOffsetLeft * 2) / 2 - that.x;\n\t\t\tthat.originY = m.abs(e.touches[0].pageY + e.touches[1].pageY - that.wrapperOffsetTop * 2) / 2 - that.y;\n\n\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t}\n\n\t\tif (that.options.momentum) {\n\t\t\tif (that.options.useTransform) {\n\t\t\t\t// Very lame general purpose alternative to CSSMatrix\n\t\t\t\tmatrix = getComputedStyle(that.scroller, null)[transform].replace(/[^0-9\\-.,]/g, '').split(',');\n\t\t\t\tx = +(matrix[12] || matrix[4]);\n\t\t\t\ty = +(matrix[13] || matrix[5]);\n\t\t\t} else {\n\t\t\t\tx = +getComputedStyle(that.scroller, null).left.replace(/[^0-9-]/g, '');\n\t\t\t\ty = +getComputedStyle(that.scroller, null).top.replace(/[^0-9-]/g, '');\n\t\t\t}\n\t\t\t\n\t\t\tif (x != that.x || y != that.y) {\n\t\t\t\tif (that.options.useTransition) that._unbind(TRNEND_EV);\n\t\t\t\telse cancelFrame(that.aniTime);\n\t\t\t\tthat.steps = [];\n\t\t\t\tthat._pos(x, y);\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\n\t\t\t}\n\t\t}\n\n\t\tthat.absStartX = that.x;\t// Needed by snap threshold\n\t\tthat.absStartY = that.y;\n\n\t\tthat.startX = that.x;\n\t\tthat.startY = that.y;\n\t\tthat.pointX = point.pageX;\n\t\tthat.pointY = point.pageY;\n\n\t\tthat.startTime = e.timeStamp || Date.now();\n\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that, e);\n\n\t\tthat._bind(MOVE_EV, window);\n\t\tthat._bind(END_EV, window);\n\t\tthat._bind(CANCEL_EV, window);\n\t},\n\t\n\t_move: function (e) {\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\n\t\t\tdeltaX = point.pageX - that.pointX,\n\t\t\tdeltaY = point.pageY - that.pointY,\n\t\t\tnewX = that.x + deltaX,\n\t\t\tnewY = that.y + deltaY,\n\t\t\tc1, c2, scale,\n\t\t\ttimestamp = e.timeStamp || Date.now();\n\n\t\tif (that.options.onBeforeScrollMove) that.options.onBeforeScrollMove.call(that, e);\n\n\t\t// Zoom\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\n\t\t\tc1 = m.abs(e.touches[0].pageX - e.touches[1].pageX);\n\t\t\tc2 = m.abs(e.touches[0].pageY - e.touches[1].pageY);\n\t\t\tthat.touchesDist = m.sqrt(c1*c1+c2*c2);\n\n\t\t\tthat.zoomed = true;\n\n\t\t\tscale = 1 / that.touchesDistStart * that.touchesDist * this.scale;\n\n\t\t\tif (scale < that.options.zoomMin) scale = 0.5 * that.options.zoomMin * Math.pow(2.0, scale / that.options.zoomMin);\n\t\t\telse if (scale > that.options.zoomMax) scale = 2.0 * that.options.zoomMax * Math.pow(0.5, that.options.zoomMax / scale);\n\n\t\t\tthat.lastScale = scale / this.scale;\n\n\t\t\tnewX = this.originX - this.originX * that.lastScale + this.x;\n\t\t\tnewY = this.originY - this.originY * that.lastScale + this.y;\n\n\t\t\tthis.scroller.style[transform] = 'translate(' + newX + 'px,' + newY + 'px) scale(' + scale + ')' + translateZ;\n\n\t\t\tif (that.options.onZoom) that.options.onZoom.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tthat.pointX = point.pageX;\n\t\tthat.pointY = point.pageY;\n\n\t\t// Slow down if outside of the boundaries\n\t\tif (newX > 0 || newX < that.maxScrollX) {\n\t\t\tnewX = that.options.bounce ? that.x + (deltaX / 2) : newX >= 0 || that.maxScrollX >= 0 ? 0 : that.maxScrollX;\n\t\t}\n\t\tif (newY > that.minScrollY || newY < that.maxScrollY) {\n\t\t\tnewY = that.options.bounce ? that.y + (deltaY / 2) : newY >= that.minScrollY || that.maxScrollY >= 0 ? that.minScrollY : that.maxScrollY;\n\t\t}\n\n\t\tthat.distX += deltaX;\n\t\tthat.distY += deltaY;\n\t\tthat.absDistX = m.abs(that.distX);\n\t\tthat.absDistY = m.abs(that.distY);\n\n\t\tif (that.absDistX < 6 && that.absDistY < 6) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Lock direction\n\t\tif (that.options.lockDirection) {\n\t\t\tif (that.absDistX > that.absDistY + 5) {\n\t\t\t\tnewY = that.y;\n\t\t\t\tdeltaY = 0;\n\t\t\t} else if (that.absDistY > that.absDistX + 5) {\n\t\t\t\tnewX = that.x;\n\t\t\t\tdeltaX = 0;\n\t\t\t}\n\t\t}\n\n\t\tthat.moved = true;\n\t\tthat._pos(newX, newY);\n\t\tthat.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n\t\tthat.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n\t\tif (timestamp - that.startTime > 300) {\n\t\t\tthat.startTime = timestamp;\n\t\t\tthat.startX = that.x;\n\t\t\tthat.startY = that.y;\n\t\t}\n\t\t\n\t\tif (that.options.onScrollMove) that.options.onScrollMove.call(that, e);\n\t},\n\t\n\t_end: function (e) {\n\t\tif (hasTouch && e.touches.length !== 0) return;\n\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.changedTouches[0] : e,\n\t\t\ttarget, ev,\n\t\t\tmomentumX = { dist:0, time:0 },\n\t\t\tmomentumY = { dist:0, time:0 },\n\t\t\tduration = (e.timeStamp || Date.now()) - that.startTime,\n\t\t\tnewPosX = that.x,\n\t\t\tnewPosY = that.y,\n\t\t\tdistX, distY,\n\t\t\tnewDuration,\n\t\t\tsnap,\n\t\t\tscale;\n\n\t\tthat._unbind(MOVE_EV, window);\n\t\tthat._unbind(END_EV, window);\n\t\tthat._unbind(CANCEL_EV, window);\n\n\t\tif (that.options.onBeforeScrollEnd) that.options.onBeforeScrollEnd.call(that, e);\n\n\t\tif (that.zoomed) {\n\t\t\tscale = that.scale * that.lastScale;\n\t\t\tscale = Math.max(that.options.zoomMin, scale);\n\t\t\tscale = Math.min(that.options.zoomMax, scale);\n\t\t\tthat.lastScale = scale / that.scale;\n\t\t\tthat.scale = scale;\n\n\t\t\tthat.x = that.originX - that.originX * that.lastScale + that.x;\n\t\t\tthat.y = that.originY - that.originY * that.lastScale + that.y;\n\t\t\t\n\t\t\tthat.scroller.style[transitionDuration] = '200ms';\n\t\t\tthat.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + that.scale + ')' + translateZ;\n\t\t\t\n\t\t\tthat.zoomed = false;\n\t\t\tthat.refresh();\n\n\t\t\tif (that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!that.moved) {\n\t\t\tif (hasTouch) {\n\t\t\t\tif (that.doubleTapTimer && that.options.zoom) {\n\t\t\t\t\t// Double tapped\n\t\t\t\t\tclearTimeout(that.doubleTapTimer);\n\t\t\t\t\tthat.doubleTapTimer = null;\n\t\t\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t\t\t\tthat.zoom(that.pointX, that.pointY, that.scale == 1 ? that.options.doubleTapZoom : 1);\n\t\t\t\t\tif (that.options.onZoomEnd) {\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tthat.options.onZoomEnd.call(that, e);\n\t\t\t\t\t\t}, 200); // 200 is default zoom duration\n\t\t\t\t\t}\n\t\t\t\t} else if (this.options.handleClick) {\n\t\t\t\t\tthat.doubleTapTimer = setTimeout(function () {\n\t\t\t\t\t\tthat.doubleTapTimer = null;\n\n\t\t\t\t\t\t// Find the last touched element\n\t\t\t\t\t\ttarget = point.target;\n\t\t\t\t\t\twhile (target.nodeType != 1) target = target.parentNode;\n\n\t\t\t\t\t\tif (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\n\t\t\t\t\t\t\tev = doc.createEvent('MouseEvents');\n\t\t\t\t\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\n\t\t\t\t\t\t\t\tpoint.screenX, point.screenY, point.clientX, point.clientY,\n\t\t\t\t\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\n\t\t\t\t\t\t\t\t0, null);\n\t\t\t\t\t\t\tev._fake = true;\n\t\t\t\t\t\t\ttarget.dispatchEvent(ev);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, that.options.zoom ? 250 : 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat._resetPos(400);\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (duration < 300 && that.options.momentum) {\n\t\t\tmomentumX = newPosX ? that._momentum(newPosX - that.startX, duration, -that.x, that.scrollerW - that.wrapperW + that.x, that.options.bounce ? that.wrapperW : 0) : momentumX;\n\t\t\tmomentumY = newPosY ? that._momentum(newPosY - that.startY, duration, -that.y, (that.maxScrollY < 0 ? that.scrollerH - that.wrapperH + that.y - that.minScrollY : 0), that.options.bounce ? that.wrapperH : 0) : momentumY;\n\n\t\t\tnewPosX = that.x + momentumX.dist;\n\t\t\tnewPosY = that.y + momentumY.dist;\n\n\t\t\tif ((that.x > 0 && newPosX > 0) || (that.x < that.maxScrollX && newPosX < that.maxScrollX)) momentumX = { dist:0, time:0 };\n\t\t\tif ((that.y > that.minScrollY && newPosY > that.minScrollY) || (that.y < that.maxScrollY && newPosY < that.maxScrollY)) momentumY = { dist:0, time:0 };\n\t\t}\n\n\t\tif (momentumX.dist || momentumY.dist) {\n\t\t\tnewDuration = m.max(m.max(momentumX.time, momentumY.time), 10);\n\n\t\t\t// Do we need to snap?\n\t\t\tif (that.options.snap) {\n\t\t\t\tdistX = newPosX - that.absStartX;\n\t\t\t\tdistY = newPosY - that.absStartY;\n\t\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) { that.scrollTo(that.absStartX, that.absStartY, 200); }\n\t\t\t\telse {\n\t\t\t\t\tsnap = that._snap(newPosX, newPosY);\n\t\t\t\t\tnewPosX = snap.x;\n\t\t\t\t\tnewPosY = snap.y;\n\t\t\t\t\tnewDuration = m.max(snap.time, newDuration);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat.scrollTo(m.round(newPosX), m.round(newPosY), newDuration);\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\t// Do we need to snap?\n\t\tif (that.options.snap) {\n\t\t\tdistX = newPosX - that.absStartX;\n\t\t\tdistY = newPosY - that.absStartY;\n\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) that.scrollTo(that.absStartX, that.absStartY, 200);\n\t\t\telse {\n\t\t\t\tsnap = that._snap(that.x, that.y);\n\t\t\t\tif (snap.x != that.x || snap.y != that.y) that.scrollTo(snap.x, snap.y, snap.time);\n\t\t\t}\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tthat._resetPos(200);\n\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t},\n\t\n\t_resetPos: function (time) {\n\t\tvar that = this,\n\t\t\tresetX = that.x >= 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x,\n\t\t\tresetY = that.y >= that.minScrollY || that.maxScrollY > 0 ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n\t\tif (resetX == that.x && resetY == that.y) {\n\t\t\tif (that.moved) {\n\t\t\t\tthat.moved = false;\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\t\t// Execute custom code on scroll end\n\t\t\t}\n\n\t\t\tif (that.hScrollbar && that.options.hideScrollbar) {\n\t\t\t\tif (vendor == 'webkit') that.hScrollbarWrapper.style[transitionDelay] = '300ms';\n\t\t\t\tthat.hScrollbarWrapper.style.opacity = '0';\n\t\t\t}\n\t\t\tif (that.vScrollbar && that.options.hideScrollbar) {\n\t\t\t\tif (vendor == 'webkit') that.vScrollbarWrapper.style[transitionDelay] = '300ms';\n\t\t\t\tthat.vScrollbarWrapper.style.opacity = '0';\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthat.scrollTo(resetX, resetY, time || 0);\n\t},\n\n\t_wheel: function (e) {\n\t\tvar that = this,\n\t\t\twheelDeltaX, wheelDeltaY,\n\t\t\tdeltaX, deltaY,\n\t\t\tdeltaScale;\n\n\t\tif ('wheelDeltaX' in e) {\n\t\t\twheelDeltaX = e.wheelDeltaX / 12;\n\t\t\twheelDeltaY = e.wheelDeltaY / 12;\n\t\t} else if('wheelDelta' in e) {\n\t\t\twheelDeltaX = wheelDeltaY = e.wheelDelta / 12;\n\t\t} else if ('detail' in e) {\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail * 3;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (that.options.wheelAction == 'zoom') {\n\t\t\tdeltaScale = that.scale * Math.pow(2, 1/3 * (wheelDeltaY ? wheelDeltaY / Math.abs(wheelDeltaY) : 0));\n\t\t\tif (deltaScale < that.options.zoomMin) deltaScale = that.options.zoomMin;\n\t\t\tif (deltaScale > that.options.zoomMax) deltaScale = that.options.zoomMax;\n\t\t\t\n\t\t\tif (deltaScale != that.scale) {\n\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t\t\tthat.wheelZoomCount++;\n\t\t\t\t\n\t\t\t\tthat.zoom(e.pageX, e.pageY, deltaScale, 400);\n\t\t\t\t\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tthat.wheelZoomCount--;\n\t\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n\t\t\t\t}, 400);\n\t\t\t}\n\t\t\t\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tdeltaX = that.x + wheelDeltaX;\n\t\tdeltaY = that.y + wheelDeltaY;\n\n\t\tif (deltaX > 0) deltaX = 0;\n\t\telse if (deltaX < that.maxScrollX) deltaX = that.maxScrollX;\n\n\t\tif (deltaY > that.minScrollY) deltaY = that.minScrollY;\n\t\telse if (deltaY < that.maxScrollY) deltaY = that.maxScrollY;\n    \n\t\tif (that.maxScrollY < 0) {\n\t\t\tthat.scrollTo(deltaX, deltaY, 0);\n\t\t}\n\t},\n\t\n\t_transitionEnd: function (e) {\n\t\tvar that = this;\n\n\t\tif (e.target != that.scroller) return;\n\n\t\tthat._unbind(TRNEND_EV);\n\t\t\n\t\tthat._startAni();\n\t},\n\n\n\t/**\n\t*\n\t* Utilities\n\t*\n\t*/\n\t_startAni: function () {\n\t\tvar that = this,\n\t\t\tstartX = that.x, startY = that.y,\n\t\t\tstartTime = Date.now(),\n\t\t\tstep, easeOut,\n\t\t\tanimate;\n\n\t\tif (that.animating) return;\n\t\t\n\t\tif (!that.steps.length) {\n\t\t\tthat._resetPos(400);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tstep = that.steps.shift();\n\t\t\n\t\tif (step.x == startX && step.y == startY) step.time = 0;\n\n\t\tthat.animating = true;\n\t\tthat.moved = true;\n\t\t\n\t\tif (that.options.useTransition) {\n\t\t\tthat._transitionTime(step.time);\n\t\t\tthat._pos(step.x, step.y);\n\t\t\tthat.animating = false;\n\t\t\tif (step.time) that._bind(TRNEND_EV);\n\t\t\telse that._resetPos(0);\n\t\t\treturn;\n\t\t}\n\n\t\tanimate = function () {\n\t\t\tvar now = Date.now(),\n\t\t\t\tnewX, newY;\n\n\t\t\tif (now >= startTime + step.time) {\n\t\t\t\tthat._pos(step.x, step.y);\n\t\t\t\tthat.animating = false;\n\t\t\t\tif (that.options.onAnimationEnd) that.options.onAnimationEnd.call(that);\t\t\t// Execute custom code on animation end\n\t\t\t\tthat._startAni();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnow = (now - startTime) / step.time - 1;\n\t\t\teaseOut = m.sqrt(1 - now * now);\n\t\t\tnewX = (step.x - startX) * easeOut + startX;\n\t\t\tnewY = (step.y - startY) * easeOut + startY;\n\t\t\tthat._pos(newX, newY);\n\t\t\tif (that.animating) that.aniTime = nextFrame(animate);\n\t\t};\n\n\t\tanimate();\n\t},\n\n\t_transitionTime: function (time) {\n\t\ttime += 'ms';\n\t\tthis.scroller.style[transitionDuration] = time;\n\t\tif (this.hScrollbar) this.hScrollbarIndicator.style[transitionDuration] = time;\n\t\tif (this.vScrollbar) this.vScrollbarIndicator.style[transitionDuration] = time;\n\t},\n\n\t_momentum: function (dist, time, maxDistUpper, maxDistLower, size) {\n\t\tvar deceleration = 0.0006,\n\t\t\tspeed = m.abs(dist) / time,\n\t\t\tnewDist = (speed * speed) / (2 * deceleration),\n\t\t\tnewTime = 0, outsideDist = 0;\n\n\t\t// Proportinally reduce speed if we are outside of the boundaries\n\t\tif (dist > 0 && newDist > maxDistUpper) {\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\n\t\t\tmaxDistUpper = maxDistUpper + outsideDist;\n\t\t\tspeed = speed * maxDistUpper / newDist;\n\t\t\tnewDist = maxDistUpper;\n\t\t} else if (dist < 0 && newDist > maxDistLower) {\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\n\t\t\tmaxDistLower = maxDistLower + outsideDist;\n\t\t\tspeed = speed * maxDistLower / newDist;\n\t\t\tnewDist = maxDistLower;\n\t\t}\n\n\t\tnewDist = newDist * (dist < 0 ? -1 : 1);\n\t\tnewTime = speed / deceleration;\n\n\t\treturn { dist: newDist, time: m.round(newTime) };\n\t},\n\n\t_offset: function (el) {\n\t\tvar left = -el.offsetLeft,\n\t\t\ttop = -el.offsetTop;\n\t\t\t\n\t\twhile (el = el.offsetParent) {\n\t\t\tleft -= el.offsetLeft;\n\t\t\ttop -= el.offsetTop;\n\t\t}\n\t\t\n\t\tif (el != this.wrapper) {\n\t\t\tleft *= this.scale;\n\t\t\ttop *= this.scale;\n\t\t}\n\n\t\treturn { left: left, top: top };\n\t},\n\n\t_snap: function (x, y) {\n\t\tvar that = this,\n\t\t\ti, l,\n\t\t\tpage, time,\n\t\t\tsizeX, sizeY;\n\n\t\t// Check page X\n\t\tpage = that.pagesX.length - 1;\n\t\tfor (i=0, l=that.pagesX.length; i<l; i++) {\n\t\t\tif (x >= that.pagesX[i]) {\n\t\t\t\tpage = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (page == that.currPageX && page > 0 && that.dirX < 0) page--;\n\t\tx = that.pagesX[page];\n\t\tsizeX = m.abs(x - that.pagesX[that.currPageX]);\n\t\tsizeX = sizeX ? m.abs(that.x - x) / sizeX * 500 : 0;\n\t\tthat.currPageX = page;\n\n\t\t// Check page Y\n\t\tpage = that.pagesY.length-1;\n\t\tfor (i=0; i<page; i++) {\n\t\t\tif (y >= that.pagesY[i]) {\n\t\t\t\tpage = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (page == that.currPageY && page > 0 && that.dirY < 0) page--;\n\t\ty = that.pagesY[page];\n\t\tsizeY = m.abs(y - that.pagesY[that.currPageY]);\n\t\tsizeY = sizeY ? m.abs(that.y - y) / sizeY * 500 : 0;\n\t\tthat.currPageY = page;\n\n\t\t// Snap with constant speed (proportional duration)\n\t\ttime = m.round(m.max(sizeX, sizeY)) || 200;\n\n\t\treturn { x: x, y: y, time: time };\n\t},\n\n\t_bind: function (type, el, bubble) {\n\t\t(el || this.scroller).addEventListener(type, this, !!bubble);\n\t},\n\n\t_unbind: function (type, el, bubble) {\n\t\t(el || this.scroller).removeEventListener(type, this, !!bubble);\n\t},\n\n\n\t/**\n\t*\n\t* Public methods\n\t*\n\t*/\n\tdestroy: function () {\n\t\tvar that = this;\n\n\t\tthat.scroller.style[transform] = '';\n\n\t\t// Remove the scrollbars\n\t\tthat.hScrollbar = false;\n\t\tthat.vScrollbar = false;\n\t\tthat._scrollbar('h');\n\t\tthat._scrollbar('v');\n\n\t\t// Remove the event listeners\n\t\tthat._unbind(RESIZE_EV, window);\n\t\tthat._unbind(START_EV);\n\t\tthat._unbind(MOVE_EV, window);\n\t\tthat._unbind(END_EV, window);\n\t\tthat._unbind(CANCEL_EV, window);\n\t\t\n\t\tif (!that.options.hasTouch) {\n\t\t\tthat._unbind('DOMMouseScroll');\n\t\t\tthat._unbind('mousewheel');\n\t\t}\n\t\t\n\t\tif (that.options.useTransition) that._unbind(TRNEND_EV);\n\t\t\n\t\tif (that.options.checkDOMChanges) clearInterval(that.checkDOMTime);\n\t\t\n\t\tif (that.options.onDestroy) that.options.onDestroy.call(that);\n\t},\n\n\trefresh: function () {\n\t\tvar that = this,\n\t\t\toffset,\n\t\t\ti, l,\n\t\t\tels,\n\t\t\tpos = 0,\n\t\t\tpage = 0;\n\n\t\tif (that.scale < that.options.zoomMin) that.scale = that.options.zoomMin;\n\t\tthat.wrapperW = that.wrapper.clientWidth || 1;\n\t\tthat.wrapperH = that.wrapper.clientHeight || 1;\n\n\t\tthat.minScrollY = -that.options.topOffset || 0;\n\t\tthat.scrollerW = m.round(that.scroller.offsetWidth * that.scale);\n\t\tthat.scrollerH = m.round((that.scroller.offsetHeight + that.minScrollY) * that.scale);\n\t\tthat.maxScrollX = that.wrapperW - that.scrollerW;\n\t\tthat.maxScrollY = that.wrapperH - that.scrollerH + that.minScrollY;\n\t\tthat.dirX = 0;\n\t\tthat.dirY = 0;\n\n\t\tif (that.options.onRefresh) that.options.onRefresh.call(that);\n\n\t\tthat.hScroll = that.options.hScroll && that.maxScrollX < 0;\n\t\tthat.vScroll = that.options.vScroll && (!that.options.bounceLock && !that.hScroll || that.scrollerH > that.wrapperH);\n\n\t\tthat.hScrollbar = that.hScroll && that.options.hScrollbar;\n\t\tthat.vScrollbar = that.vScroll && that.options.vScrollbar && that.scrollerH > that.wrapperH;\n\n\t\toffset = that._offset(that.wrapper);\n\t\tthat.wrapperOffsetLeft = -offset.left;\n\t\tthat.wrapperOffsetTop = -offset.top;\n\n\t\t// Prepare snap\n\t\tif (typeof that.options.snap == 'string') {\n\t\t\tthat.pagesX = [];\n\t\t\tthat.pagesY = [];\n\t\t\tels = that.scroller.querySelectorAll(that.options.snap);\n\t\t\tfor (i=0, l=els.length; i<l; i++) {\n\t\t\t\tpos = that._offset(els[i]);\n\t\t\t\tpos.left += that.wrapperOffsetLeft;\n\t\t\t\tpos.top += that.wrapperOffsetTop;\n\t\t\t\tthat.pagesX[i] = pos.left < that.maxScrollX ? that.maxScrollX : pos.left * that.scale;\n\t\t\t\tthat.pagesY[i] = pos.top < that.maxScrollY ? that.maxScrollY : pos.top * that.scale;\n\t\t\t}\n\t\t} else if (that.options.snap) {\n\t\t\tthat.pagesX = [];\n\t\t\twhile (pos >= that.maxScrollX) {\n\t\t\t\tthat.pagesX[page] = pos;\n\t\t\t\tpos = pos - that.wrapperW;\n\t\t\t\tpage++;\n\t\t\t}\n\t\t\tif (that.maxScrollX%that.wrapperW) that.pagesX[that.pagesX.length] = that.maxScrollX - that.pagesX[that.pagesX.length-1] + that.pagesX[that.pagesX.length-1];\n\n\t\t\tpos = 0;\n\t\t\tpage = 0;\n\t\t\tthat.pagesY = [];\n\t\t\twhile (pos >= that.maxScrollY) {\n\t\t\t\tthat.pagesY[page] = pos;\n\t\t\t\tpos = pos - that.wrapperH;\n\t\t\t\tpage++;\n\t\t\t}\n\t\t\tif (that.maxScrollY%that.wrapperH) that.pagesY[that.pagesY.length] = that.maxScrollY - that.pagesY[that.pagesY.length-1] + that.pagesY[that.pagesY.length-1];\n\t\t}\n\n\t\t// Prepare the scrollbars\n\t\tthat._scrollbar('h');\n\t\tthat._scrollbar('v');\n\n\t\tif (!that.zoomed) {\n\t\t\tthat.scroller.style[transitionDuration] = '0';\n\t\t\tthat._resetPos(400);\n\t\t}\n\t},\n\n\tscrollTo: function (x, y, time, relative) {\n\t\tvar that = this,\n\t\t\tstep = x,\n\t\t\ti, l;\n\n\t\tthat.stop();\n\n\t\tif (!step.length) step = [{ x: x, y: y, time: time, relative: relative }];\n\t\t\n\t\tfor (i=0, l=step.length; i<l; i++) {\n\t\t\tif (step[i].relative) { step[i].x = that.x - step[i].x; step[i].y = that.y - step[i].y; }\n\t\t\tthat.steps.push({ x: step[i].x, y: step[i].y, time: step[i].time || 0 });\n\t\t}\n\n\t\tthat._startAni();\n\t},\n\n\tscrollToElement: function (el, time) {\n\t\tvar that = this, pos;\n\t\tel = el.nodeType ? el : that.scroller.querySelector(el);\n\t\tif (!el) return;\n\n\t\tpos = that._offset(el);\n\t\tpos.left += that.wrapperOffsetLeft;\n\t\tpos.top += that.wrapperOffsetTop;\n\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < that.maxScrollX ? that.maxScrollX : pos.left;\n\t\tpos.top = pos.top > that.minScrollY ? that.minScrollY : pos.top < that.maxScrollY ? that.maxScrollY : pos.top;\n\t\ttime = time === undefined ? m.max(m.abs(pos.left)*2, m.abs(pos.top)*2) : time;\n\n\t\tthat.scrollTo(pos.left, pos.top, time);\n\t},\n\n\tscrollToPage: function (pageX, pageY, time) {\n\t\tvar that = this, x, y;\n\t\t\n\t\ttime = time === undefined ? 400 : time;\n\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that);\n\n\t\tif (that.options.snap) {\n\t\t\tpageX = pageX == 'next' ? that.currPageX+1 : pageX == 'prev' ? that.currPageX-1 : pageX;\n\t\t\tpageY = pageY == 'next' ? that.currPageY+1 : pageY == 'prev' ? that.currPageY-1 : pageY;\n\n\t\t\tpageX = pageX < 0 ? 0 : pageX > that.pagesX.length-1 ? that.pagesX.length-1 : pageX;\n\t\t\tpageY = pageY < 0 ? 0 : pageY > that.pagesY.length-1 ? that.pagesY.length-1 : pageY;\n\n\t\t\tthat.currPageX = pageX;\n\t\t\tthat.currPageY = pageY;\n\t\t\tx = that.pagesX[pageX];\n\t\t\ty = that.pagesY[pageY];\n\t\t} else {\n\t\t\tx = -that.wrapperW * pageX;\n\t\t\ty = -that.wrapperH * pageY;\n\t\t\tif (x < that.maxScrollX) x = that.maxScrollX;\n\t\t\tif (y < that.maxScrollY) y = that.maxScrollY;\n\t\t}\n\n\t\tthat.scrollTo(x, y, time);\n\t},\n\n\tdisable: function () {\n\t\tthis.stop();\n\t\tthis._resetPos(0);\n\t\tthis.enabled = false;\n\n\t\t// If disabled after touchstart we make sure that there are no left over events\n\t\tthis._unbind(MOVE_EV, window);\n\t\tthis._unbind(END_EV, window);\n\t\tthis._unbind(CANCEL_EV, window);\n\t},\n\t\n\tenable: function () {\n\t\tthis.enabled = true;\n\t},\n\t\n\tstop: function () {\n\t\tif (this.options.useTransition) this._unbind(TRNEND_EV);\n\t\telse cancelFrame(this.aniTime);\n\t\tthis.steps = [];\n\t\tthis.moved = false;\n\t\tthis.animating = false;\n\t},\n\t\n\tzoom: function (x, y, scale, time) {\n\t\tvar that = this,\n\t\t\trelScale = scale / that.scale;\n\n\t\tif (!that.options.useTransform) return;\n\n\t\tthat.zoomed = true;\n\t\ttime = time === undefined ? 200 : time;\n\t\tx = x - that.wrapperOffsetLeft - that.x;\n\t\ty = y - that.wrapperOffsetTop - that.y;\n\t\tthat.x = x - x * relScale + that.x;\n\t\tthat.y = y - y * relScale + that.y;\n\n\t\tthat.scale = scale;\n\t\tthat.refresh();\n\n\t\tthat.x = that.x > 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x;\n\t\tthat.y = that.y > that.minScrollY ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n\t\tthat.scroller.style[transitionDuration] = time + 'ms';\n\t\tthat.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + scale + ')' + translateZ;\n\t\tthat.zoomed = false;\n\t},\n\t\n\tisReady: function () {\n\t\treturn !this.moved && !this.zoomed && !this.animating;\n\t}\n};\n\nfunction prefixStyle (style) {\n\tif ( vendor === '' ) return style;\n\n\tstyle = style.charAt(0).toUpperCase() + style.substr(1);\n\treturn vendor + style;\n}\n\ndummyStyle = null;\t// for the sake of it\n\nif (typeof exports !== 'undefined') exports.iScroll = iScroll;\nelse window.iScroll = iScroll;\n\n})(window, document);\n"]}